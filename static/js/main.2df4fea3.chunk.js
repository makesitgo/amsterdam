(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{201:function(e,n){},203:function(e,n){},220:function(e,n,t){"use strict";t.r(n);var r=t(3),o=t.n(r),a=t(19),c=t(0),i=t(35),s=t(104),l=t.n(s),d=t(42),u=t(17),f=t(20),b=t(36),j=t(106),m=t(27),g=t(8),O=t(12),h=t(4),p=t(11),x=t(67),v=t(5),y=Object(r.createContext)(null),k=function(e){var n=e.children,t=new x.a({id:"amsterdam-ussnf"}),o=Object(r.useState)(t.currentUser),a=Object(O.a)(o,2),c=a[0],i=a[1],s=function(){var e=Object(p.a)(Object(h.a)().mark((function e(n,r){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.logIn(x.b.emailPassword(n,r));case 3:return i(t.currentUser),e.abrupt("return",t.currentUser);case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("logging in anonymously"),e.next=4,t.logIn(x.b.anonymous());case 4:return i(t.currentUser),e.abrupt("return",t.currentUser);case 8:return e.prev=8,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.currentUser){e.next=4;break}return e.next=4,t.currentUser.logOut();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("failed to logout",e.t0);case 9:return e.prev=9,i(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(y.Provider,{value:{login:s,loginAnonymous:l,logout:d,user:c},children:n})},w=function(){var e=Object(r.useContext)(y);if(null===e)throw new Error("useRealm() called outside of a RealmProvider");return e},z=Object(r.createContext)(null),C=function(e){var n=e.children,t=w().user,o=Object(r.useState)(null),a=Object(O.a)(o,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){console.log("on user effect...setting data"),null!==t&&(console.log(t),console.log(t.profile),i(t.mongoClient("data")))}),[t]),Object(v.jsx)(z.Provider,{value:{data:S(c)},children:n})};function S(e){return e?{players:function(){return e.db("amsterdam").collection("players")},schedule:function(){return e.db("amsterdam").collection("schedule")},teams:function(){return e.db("amsterdam").collection("teams")}}:null}var A,L,E,I=t(77),P=f.a.div(A||(A=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),M=f.a.div(L||(L=Object(u.a)(["\n  min-width: 360px;\n  padding: 1rem;\n  border: 1px solid;\n"]))),q=f.a.div(E||(E=Object(u.a)(["\n  min-width: 360px;\n  padding: 0 1rem 1rem 1rem;\n  margin-top: 0.5rem;\n"])));var B=function(){var e,n,t=Object(r.useState)(""),o=Object(O.a)(t,2),a=o[0],c=o[1],i=Object(r.useState)(""),s=Object(O.a)(i,2),l=s[0],d=s[1],u=w(),f=u.login,j=u.loginAnonymous,h=u.user,p=(null===(e=window.location.state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)||"/";return h?Object(v.jsx)(g.a,{to:p,replace:!0}):Object(v.jsxs)(P,{children:[Object(v.jsxs)(M,{children:[Object(v.jsx)(m.a,{style:{marginBottom:"1rem"},children:"Please log in using your credentials"}),Object(v.jsx)(I.a,{label:"Username",placeholder:"your.email@example.com",onChange:function(e){c(e.target.value)},value:a}),Object(v.jsx)(I.a,{label:"Password",type:"password",onChange:function(e){d(e.target.value)},value:l}),Object(v.jsx)(b.a,{style:{marginTop:"1rem"},variant:"primary",onClick:function(){return f(a,l)},children:"Login"})]}),Object(v.jsxs)(q,{children:[Object(v.jsx)(m.a,{style:{marginBottom:"0.5rem"},children:"Or log in as a guest"}),Object(v.jsx)(b.a,{variant:"primaryOutline",onClick:function(){return j()},children:"Login Anonymously"})]})]})};var U,F=function(e){var n=e.children,t=w().user,r=Object(g.f)();return t?n:Object(v.jsx)(g.a,{to:"/login",state:{from:r},replace:!0})},R=t(13),T=t(9),H=f.a.div(U||(U=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"])));var _,D,J,N,G,K=function(){var e=function(){var e=Object(r.useContext)(z);if(null===e)throw new Error("useAtlas() called outside of a AtlasProvider");return e}().data,n=Object(r.useState)([]),t=Object(O.a)(n,2),o=t[0],a=t[1];Object(r.useEffect)((function(){e&&e.players().find().then(a)}),[e]);var c=Object(r.useState)([]),i=Object(O.a)(c,2),s=i[0],l=i[1];Object(r.useEffect)((function(){e&&e.teams().find().then(l)}),[e]);var d=Object(r.useState)([]),u=Object(O.a)(d,2),f=u[0],j=u[1];if(Object(r.useEffect)((function(){e&&e.schedule().find().then(j)}),[e]),!e)return null;var m=o.reduce((function(e,n){return Object(T.a)(Object(T.a)({},e),{},Object(R.a)({},n.key,n))}),{}),g=s.reduce((function(e,n){return Object(T.a)(Object(T.a)({},e),{},Object(R.a)({},n.key,n))}),{}),h=f.reduce((function(e,n){return Object(T.a)(Object(T.a)({},e),{},Object(R.a)({},n.season.code,Object(T.a)(Object(T.a)({},e[n.season.code]||{}),{},Object(R.a)({},n.week_num,Object(T.a)(Object(T.a)({},(e[n.season.code]||{})[n.week_num]||{}),{},Object(R.a)({},n.season.day,n))))))}),{});return console.log(m),console.log(g),console.log(h),Object(v.jsx)(H,{children:Object(v.jsx)(b.a,{variant:"primary",href:"https://mongodb.design",rel:"noopener noreferrer",children:"Read the Leafygreen Docs"})})},Q=function(e){var n=e.user;return Object(v.jsx)("div",{children:Object(v.jsxs)("h1",{children:["Logged in with anonymous id: ",n.id]})})},V=function(){var e=w().loginAnonymous;return Object(v.jsx)("button",{onClick:e,children:"Log In"})},W=t.p+"static/media/logo.6ce24c58.svg",X=f.a.div(_||(_=Object(u.a)(["\n  text-align: center;\n"]))),Y=f.a.header(D||(D=Object(u.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: ",";\n"])),(function(e){return e.theme.colors.grays.base}),(function(e){return e.theme.colors.white})),Z=f.a.a(J||(J=Object(u.a)(["\n  color: ",";\n"])),(function(e){return e.theme.colors.blues.light1})),$=Object(c.keyframes)(N||(N=Object(u.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),ee=f.a.img(G||(G=Object(u.a)(["\n  height: 40vmin;\n  pointer-events: none;\n  @media (prefers-reduced-motion: no-preference) {\n    animation: "," infinite 20s linear;\n  }\n"])),$);var ne,te,re,oe,ae,ce=function(){var e=w().user;return Object(v.jsx)(X,{children:Object(v.jsxs)(Y,{children:[Object(v.jsx)(ee,{src:W,alt:"logo"}),Object(v.jsxs)("p",{children:["Edit ",Object(v.jsx)("code",{children:"src/sandbox/sandbox.tsx"})," and save to reload."]}),Object(v.jsx)(Z,{href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"}),e?Object(v.jsx)(Q,{user:e}):Object(v.jsx)(V,{})]})})},ie=f.a.header(ne||(ne=Object(u.a)(["\n  text-align: center;\n"]))),se=f.a.div(te||(te=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  grid-column-gap: 5px;\n  justify-items: center;\n"]))),le=f.a.div(re||(re=Object(u.a)(["\n  margin-left: auto;\n  text-align: right;\n  padding-right: 0.5rem;\n"]))),de=Object(c.keyframes)(oe||(oe=Object(u.a)(["\n  from {\n    transform: rotate(-5deg);\n  }\n  to {\n    transform: rotate(5deg);\n  }\n"]))),ue=Object(f.a)(j.a)(ae||(ae=Object(u.a)(["\n  display: inline-block;\n  margin: 24px;\n  animation: "," 3s infinite alternate-reverse ease-in-out;\n  transform-origin: 50% 100%;\n"])),de);var fe,be,je=function(){var e=w(),n=e.logout,t=e.user;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(ie,{children:[Object(v.jsxs)(se,{children:[Object(v.jsx)(m.c,{style:{gridColumnStart:2},children:"Amsterdam Billiards League Site"}),t&&Object(v.jsxs)(le,{children:[Object(v.jsx)(m.a,{children:"Logged in as ".concat("anon-user"===t.providerType?"guest":t.profile.email||t.id)}),Object(v.jsx)(b.a,{variant:"primaryOutline",onClick:n,children:"Logout"})]})]}),Object(v.jsx)(ue,{height:98})]}),Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{path:"/",element:Object(v.jsx)(F,{children:Object(v.jsx)(K,{})})}),Object(v.jsx)(g.b,{path:"login",element:Object(v.jsx)(B,{})}),Object(v.jsx)(g.b,{path:"sandbox",element:Object(v.jsx)(ce,{})})]})]})},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,221)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),a(e),c(e)}))},ge="".concat("https://d2va9gm4j17fy9.cloudfront.net","/fonts"),Oe=Object(c.css)(fe||(fe=Object(u.a)(["\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: normal;\n    src: url('","/akzidgrostdreg.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdreg.eot?#iefix')\n        format('embedded-opentype'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdreg.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdreg.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: 600;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: bold;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  html {\n    font-family: 'Akzidenz', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-weight: normal;\n    font-style: normal;\n  }\n\n  body {\n    margin: 0;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: border-box;\n  }\n"])),ge,ge,ge,ge,ge,ge,ge,ge,ge,ge,ge,ge,ge,ge),he=Object(c.css)(be||(be=Object(u.a)(["\n/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n"])));var pe=function(){return[he,Oe]},xe={colors:{black:"#000000",white:"#ffffff",offwhite:"#fffed1",grays:{base:"#282c34"},reds:{base:"#4d0a05",light1:"#8a1a10",light2:"#b42619",light3:"#df3121"},blues:{light1:"#61dafb"}},typography:{fonts:{code:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"}}};l.a.createRoot(document.getElementById("root")).render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(d.a,{basename:"/amsterdam",children:Object(v.jsx)(k,{children:Object(v.jsx)(C,{children:Object(v.jsx)(i.a,{children:Object(v.jsxs)(a.f,{theme:xe,children:[Object(v.jsx)(c.Global,{styles:pe}),Object(v.jsx)(je,{})]})})})})})})),me(console.log)}},[[220,1,2]]]);
//# sourceMappingURL=main.2df4fea3.chunk.js.map