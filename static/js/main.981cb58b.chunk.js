(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{240:function(e,t){},242:function(e,t){},259:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),s=n(3),i=n(20),o=n(135),l=n.n(o),j=n(31),u=n(8),b=n(17),d=n(151),m=n(9),f=n(18),O=n(101),h=n(4),x=Object(a.createContext)(null),p=function(e){var t=e.children,n=new O.a({id:"amsterdam-wmrtx",baseUrl:"http://localhost:8080"}),r=Object(a.useState)(n.currentUser),c=Object(u.a)(r,2),s=c[0],i=c[1],o=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t,a){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.logIn(O.b.emailPassword(t,a));case 3:return i(n.currentUser),e.abrupt("return",n.currentUser);case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(f.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.logIn(O.b.anonymous());case 3:return i(n.currentUser),e.abrupt("return",n.currentUser);case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.currentUser){e.next=4;break}return e.next=4,n.currentUser.logOut();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("failed to logout",e.t0);case 9:return e.prev=9,i(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(x.Provider,{value:{login:o,loginAnonymous:l,logout:j,user:s},children:t})},g=function(){var e=Object(a.useContext)(x);if(null===e)throw new Error("useRealm() called outside of a RealmProvider");return e},v=Object(a.createContext)(null),y=function(e){var t=e.children,n=g().user,r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){null!==n&&i(n.mongoClient("data"))}),[n]),Object(h.jsx)(v.Provider,{value:{data:k(s)},children:t})},w=function(){var e=Object(a.useContext)(v);if(null===e)throw new Error("useAtlas() called outside of a AtlasProvider");return e};function k(e){return e?{players:function(){return e.db("amsterdam").collection("players")},seasons:function(){return e.db("amsterdam").collection("seasons")},teams:function(){return e.db("amsterdam").collection("teams")},teamMatches:function(){return e.db("amsterdam").collection("team_matches")},playerMatches:function(){return e.db("amsterdam").collection("player_matches")}}:null}var _,S,C,M=n(12),T=n(14),W=n(23),P=n(36),z=n(11),E=T.a.div(_||(_=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),L=T.a.div(S||(S=Object(M.a)(["\n  min-width: 360px;\n  padding: 1rem;\n  border: 1px solid;\n"]))),A=T.a.div(C||(C=Object(M.a)(["\n  min-width: 360px;\n  padding: 0 1rem 1rem 1rem;\n  margin-top: 0.5rem;\n"])));var B=function(){var e,t,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],d=g(),m=d.login,f=d.loginAnonymous,O=d.user,x=(null===(e=window.location.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return O?Object(h.jsx)(b.a,{to:x,replace:!0}):Object(h.jsxs)(E,{children:[Object(h.jsxs)(L,{children:[Object(h.jsx)(z.a,{style:{marginBottom:"1rem"},children:"Please log in using your credentials"}),Object(h.jsx)(P.a,{label:"Username",placeholder:"your.email@example.com",onChange:function(e){s(e.target.value)},value:c}),Object(h.jsx)(P.a,{label:"Password",type:"password",onChange:function(e){j(e.target.value)},value:l}),Object(h.jsx)(W.c,{style:{marginTop:"1rem"},variant:"primary",onClick:function(){return m(c,l)},children:"Login"})]}),Object(h.jsxs)(A,{children:[Object(h.jsx)(z.a,{style:{marginBottom:"0.5rem"},children:"Or log in as a guest"}),Object(h.jsx)(W.c,{variant:"primaryOutline",onClick:function(){return f()},children:"Login Anonymously"})]})]})};var I,F,G=function(e){var t=e.children,n=g().user,a=Object(b.f)();return n?t:Object(h.jsx)(b.a,{to:"/login",state:{from:a},replace:!0})},q=n(138),D=Object(s.keyframes)(I||(I=Object(M.a)(["\n  from {\n    transform: rotate(-5deg);\n  }\n  to {\n    transform: rotate(5deg);\n  }\n"]))),R=Object(T.a)(q.a)(F||(F=Object(M.a)(["\n  display: inline-block;\n  margin: 24px;\n  animation: "," 3s infinite alternate-reverse ease-in-out;\n  transform-origin: 50% 100%;\n"])),D);var U,N,H,Y=function(){return Object(h.jsx)(R,{style:{marginTop:0,marginBottom:0},height:48})},X=T.a.div(U||(U=Object(M.a)(["\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  grid-column-gap: 5px;\n  justify-items: center;\n  margin-top: 0.5rem;\n"]))),J=T.a.ul(N||(N=Object(M.a)(["\n  margin-right: auto;\n  text-align: left;\n  display: flex;\n"]))),K=T.a.div(H||(H=Object(M.a)(["\n  margin-left: auto;\n  text-align: right;\n  padding-right: 0.5rem;\n"])));var Q,V=function(){var e=g(),t=e.logout,n=e.user;return Object(h.jsxs)(X,{children:[Object(h.jsxs)(J,{children:[Object(h.jsx)(j.b,{style:{margin:"1rem",textDecoration:"none"},to:"/",children:"Standings"}),Object(h.jsx)(j.b,{style:{margin:"1rem",textDecoration:"none"},to:"/team",children:"Team Results"}),Object(h.jsx)(j.b,{style:{margin:"1rem",textDecoration:"none"},to:"/players",children:"Individual Results"})]}),Object(h.jsxs)("span",{style:{textAlign:"center"},children:[Object(h.jsx)(z.c,{children:"Amsterdam Billiards"}),Object(h.jsx)(Y,{})]}),n&&Object(h.jsxs)(K,{children:[Object(h.jsx)(W.c,{variant:"primaryOutline",onClick:t,children:"Logout"}),Object(h.jsx)(z.a,{children:"anon-user"===n.providerType?"Guest":n.profile.email||n.id})]})]})},$=n(40),Z=n(35),ee=n(37),te=T.a.header(Q||(Q=Object(M.a)(["\n  margin-top: 0.5rem;\n  display: flex;\n  justify-items: space-between;\n  align-items: center;\n"])));var ne,ae,re,ce=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=g(),s=c.logout,i=c.user;return Object(h.jsxs)(te,{children:[Object(h.jsx)(Y,{}),Object(h.jsx)(z.c,{style:{flex:1},children:"Amsterdam Billiards"}),Object(h.jsxs)(ee.a,{align:"bottom",justify:"end",open:n,trigger:Object(h.jsx)(Z.a,{size:"xlarge","aria-label":"User Menu",onClick:function(){return r(!n)},children:Object(h.jsx)($.a,{glyph:"Ellipsis"})}),children:[Object(h.jsx)(ee.b,{href:"/amsterdam",children:"Standings"}),Object(h.jsx)(ee.b,{href:"/amsterdam/team",children:"Team Results"}),Object(h.jsx)(ee.b,{href:"/amsterdam/players",children:"Individual Results"}),Object(h.jsx)(ee.c,{}),!i&&Object(h.jsx)(ee.b,{href:"/amsterdam/login",children:"Login"}),i&&Object(h.jsx)(ee.b,{onClick:s,description:"anon-user"===i.providerType?"As guest":i.profile.email||i.id,children:"Logout"})]})]})},se=n(43),ie=T.a.div(ne||(ne=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"]))),oe=T.a.ol(ae||(ae=Object(M.a)(["\n  list-style: auto;\n"]))),le=T.a.ol(re||(re=Object(M.a)(["\n  list-style: disc;\n  margin-left: 1rem;\n"])));var je,ue=function(){return Object(h.jsxs)(ie,{children:[Object(h.jsx)(z.d,{children:"Welcome to Amsterdam Billiards Information"}),Object(h.jsxs)(se.a,{children:[Object(h.jsx)(W.c,{href:"http://amsterdambilliards.com/",target:"_blank",rel:"noopener noreferrer",children:"Official Amsterdam Billiards & Bar website"}),Object(h.jsx)(W.c,{href:"/amsterdam/seasons/2022/summer/team_8ball",children:"Team 8-Ball League Site"})]}),Object(h.jsx)(z.e,{children:"Why You Should Join an Amsterdam Billiards League:"}),Object(h.jsxs)(oe,{children:[Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"The leagues are for players of all levels, including beginners and Pros"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"You'll have fun"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"You'll improve your pool game"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"It's a great way to meet other pool players"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"The leagues are co-ed"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"They're inexpensive"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"The prizes are great"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"They're easy to join (just sign up in the club at the front desk or by clicking 'Register Now!' on this page)"})}),Object(h.jsxs)("li",{children:[Object(h.jsx)(z.a,{children:"You get a lot of free stuff:"}),Object(h.jsxs)(le,{children:[Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"Play pool for free for a week"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"3 hours of free play every week while the league lasts"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"Get a dollar off all drinks while you're playing in the leagues"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"Mid-Season league party"})}),Object(h.jsx)("li",{children:Object(h.jsx)(z.a,{children:"League Finals & Registration signup party"})})]})]})]}),Object(h.jsx)(W.c,{href:"https://amsterdambilliards.com/leagues/",target:"_blank",rel:"noopener noreferrer",children:"Register Now!"})]})},be=n(15),de=n(7),me=n(27),fe=T.a.div(je||(je=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"])));var Oe,he,xe,pe,ge,ve=function(e){var t=e.seasons,n=w().data,r=Object(a.useState)(),c=Object(u.a)(r,2),s=c[0],i=c[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),j=l[0],b=l[1],d=Object(a.useState)([]),m=Object(u.a)(d,2),f=m[0],O=m[1];return Object(a.useEffect)((function(){n&&Promise.all([n.teamMatches().find({season_xref:null===s||void 0===s?void 0:s.xref}),n.playerMatches().find({season_xref:null===s||void 0===s?void 0:s.xref})]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];b(Object.values(Object.values(n.reduce((function(e,t){var n,a=e[t.teams[0].name]||{name:t.teams[0].name,totalGames:{wins:0,losses:0,total:0},totalMatches:{wins:0,losses:0,total:0},weeklyWins:0,weeklyLosses:0},r=e[t.teams[1].name]||{name:t.teams[1].name,totalGames:{wins:0,losses:0,total:0},totalMatches:{wins:0,losses:0,total:0},weeklyWins:0,weeklyLosses:0};return Object(de.a)(Object(de.a)({},e),{},(n={},Object(be.a)(n,t.teams[0].name,Object(de.a)(Object(de.a)({},a),{},{totalGames:{wins:a.totalGames.wins+t.teams[0].games_won,losses:a.totalGames.losses+t.teams[1].games_won,total:a.totalGames.total+t.teams[0].games_won+t.teams[1].games_won},totalMatches:{wins:a.totalMatches.wins+t.teams[0].matches_won,losses:a.totalMatches.losses+t.teams[1].matches_won,total:a.totalMatches.total+t.teams[0].matches_won+t.teams[1].matches_won},weeklyWins:a.weeklyWins+(t.teams[0].win?1:0),weeklyLosses:a.weeklyWins+(t.teams[0].loss?1:0)})),Object(be.a)(n,t.teams[1].name,Object(de.a)(Object(de.a)({},r),{},{totalGames:{wins:r.totalGames.wins+t.teams[1].games_won,losses:r.totalGames.losses+t.teams[0].games_won,total:r.totalGames.total+t.teams[1].games_won+t.teams[0].games_won},totalMatches:{wins:r.totalMatches.wins+t.teams[1].matches_won,losses:r.totalMatches.losses+t.teams[0].matches_won,total:r.totalMatches.total+t.teams[1].matches_won+t.teams[0].matches_won},weeklyWins:r.weeklyWins+(t.teams[1].win?1:0),weeklyLosses:r.weeklyWins+(t.teams[1].loss?1:0)})),n))}),{}))));var r=a.reduce((function(e,t){return Object(de.a)({},e)}),{});console.log(r)}))}),[n,null===s||void 0===s?void 0:s.xref]),n?Object(h.jsxs)(fe,{children:[Object(h.jsx)(me.b,{style:{width:"360px"},label:"Choose a season:",placeholder:"Select...",value:(null===s||void 0===s?void 0:s.name)||"",onChange:function(e){return i(t.find((function(t){return t.name===e})))},children:t.map((function(e){var t=e.xref,n=e.name;return Object(h.jsx)(me.a,{value:n,children:n},t)}))}),s&&Object(h.jsx)(h.Fragment,{children:"player data"})]}):(console.log(j,f,O),null)},ye=function(e){var t=e.user;return Object(h.jsx)("div",{children:Object(h.jsxs)("h1",{children:["Logged in with anonymous id: ",t.id]})})},we=function(){var e=g().loginAnonymous;return Object(h.jsx)("button",{onClick:e,children:"Log In"})},ke=n.p+"static/media/logo.6ce24c58.svg",_e=T.a.div(Oe||(Oe=Object(M.a)(["\n  text-align: center;\n"]))),Se=T.a.header(he||(he=Object(M.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: ",";\n"])),(function(e){return e.theme.colors.grays.base}),(function(e){return e.theme.colors.white})),Ce=T.a.a(xe||(xe=Object(M.a)(["\n  color: ",";\n"])),(function(e){return e.theme.colors.blues.light1})),Me=Object(s.keyframes)(pe||(pe=Object(M.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Te=T.a.img(ge||(ge=Object(M.a)(["\n  height: 40vmin;\n  pointer-events: none;\n  @media (prefers-reduced-motion: no-preference) {\n    animation: "," infinite 20s linear;\n  }\n"])),Me);var We,Pe=function(){var e=g().user;return Object(h.jsx)(_e,{children:Object(h.jsxs)(Se,{children:[Object(h.jsx)(Te,{src:ke,alt:"logo"}),Object(h.jsxs)("p",{children:["Edit ",Object(h.jsx)("code",{children:"src/sandbox/sandbox.tsx"})," and save to reload."]}),Object(h.jsx)(Ce,{href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"}),e?Object(h.jsx)(ye,{user:e}):Object(h.jsx)(we,{})]})})},ze=n(28),Ee=n(99),Le=T.a.div(We||(We=Object(M.a)(["\n  margin: 0 auto;\n  max-width: 62%;\n  @media (max-width: 720px) {\n    max-width: 100%;\n  }\n"])));var Ae,Be,Ie,Fe,Ge=function(e){var t=e.children;return Object(h.jsx)(Le,{children:t})},qe=n(52),De=n(65),Re=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},Ue=function(e){switch(e){case"winter":case"spring":case"summer":case"fall":return!0}return!1},Ne=T.a.div(Ae||(Ae=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),He=T.a.div(Be||(Be=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  :not(:first-of-type) {\n    margin-left: 2rem;\n  }\n"]))),Ye=T.a.div(Ie||(Ie=Object(M.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n"]))),Xe=T.a.div(Fe||(Fe=Object(M.a)(["\n  display: flex;\n"])));var Je,Ke=function(e){var t=e.season,n=e.teams,r=e.saveDivisions,c=e.saveTeams,s=Object(b.g)(),i=Object(a.useState)(!Object.values(t.divisions).reduce((function(e,t){return e+t.length}),0)),o=Object(u.a)(i,2),l=o[0],j=o[1],d=Object(a.useState)(""),O=Object(u.a)(d,2),x=O[0],p=O[1],g=Object(a.useState)(t.nights.reduce((function(e,n){var a=t.divisions[n]||[];return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},n,a.length>0?a:[""]))}),{})),v=Object(u.a)(g,2),y=v[0],w=v[1],k=Object(a.useState)(!!Object.values(t.divisions).reduce((function(e,t){return e+t.length}),0)),_=Object(u.a)(k,2),S=_[0],C=_[1],M=Object(a.useState)(""),T=Object(u.a)(M,2),E=T[0],L=T[1],A=Object(a.useState)({}),B=Object(u.a)(A,2),I=B[0],F=B[1];return Object(a.useEffect)((function(){F(Object.entries(y).reduce((function(e,t){var a=Object(u.a)(t,2),r=a[0],c=a[1];return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},r,c.reduce((function(e,t){var a=n.filter((function(e){return e.division_name===t})).map((function(e){return{xref:e.xref+"",name:e.name}}));return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t,a.length>0?a:[{xref:"",name:""}]))}),{})))}),{}))}),[t,n,y]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(W.c,{variant:"primaryOutline",onClick:function(){return s("..")},children:"Back to Dashboard"}),Object(h.jsxs)(qe.a,{title:"Admin: Divisions",description:"Make sure the league divisions are correct",isOpen:l,onClick:function(){return j(!l)},children:[Object(h.jsx)(Ne,{children:t.nights.map((function(e){return Object(h.jsxs)(He,{children:[Object(h.jsxs)(Ye,{children:[Object(h.jsx)(z.g,{children:Re(e)}),Object(h.jsx)(W.c,{size:"xsmall",onClick:function(){return w(Object(de.a)(Object(de.a)({},y),{},Object(be.a)({},e,[].concat(Object(ze.a)(y[e]||[]),[""]))))},children:"+"})]}),(y[e]||[]).map((function(t,n){return Object(h.jsx)(P.a,{style:{marginBottom:"0.5rem"},label:"Division #".concat(n),value:t,onChange:function(t){return w(Object(de.a)(Object(de.a)({},y),{},Object(be.a)({},e,(y[e]||[]).map((function(e,a){return a===n?t.target.value:e})))))}},t+n)}))]},e)}))}),Object(h.jsx)(De.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r(y),j(!1),C(!0),p("")}catch(t){n=t.error,p("failed to save divisions: ".concat(n))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},errorMessage:x})]}),Object(h.jsxs)(qe.a,{title:"Admin: Teams",description:"Make sure the league teams are correct",isOpen:S,onClick:function(){return C(!S)},children:[Object.entries(I).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(h.jsx)(Ne,{children:Object.entries(a).map((function(e){var t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(h.jsxs)(He,{children:[Object(h.jsxs)(Ye,{children:[Object(h.jsx)(z.g,{children:a}),Object(h.jsx)(W.c,{size:"xsmall",onClick:function(){return F(Object(de.a)(Object(de.a)({},I),{},Object(be.a)({},n,Object(de.a)(Object(de.a)({},I[n]||{}),{},Object(be.a)({},a,[].concat(Object(ze.a)((I[n]||{})[a]||[]),[{xref:"",name:""}]))))))},children:"+"})]}),r.map((function(e,t){return Object(h.jsxs)(Xe,{children:[Object(h.jsx)(P.a,{label:"Team #".concat(t," Key"),value:e.xref,onChange:function(e){return F(Object(de.a)(Object(de.a)({},I),{},Object(be.a)({},n,Object(de.a)(Object(de.a)({},I[n]||{}),{},Object(be.a)({},a,((I[n]||{})[a]||[]).map((function(n,a){return a===t?Object(de.a)(Object(de.a)({},n),{},{xref:e.target.value}):n})))))))}}),Object(h.jsx)(P.a,{label:"Team #".concat(t," Name"),value:e.name,onChange:function(e){return F(Object(de.a)(Object(de.a)({},I),{},Object(be.a)({},n,Object(de.a)(Object(de.a)({},I[n]||{}),{},Object(be.a)({},a,((I[n]||{})[a]||[]).map((function(n,a){return a===t?Object(de.a)(Object(de.a)({},n),{},{name:e.target.value}):n})))))))}})]},t)}))]},a)}))},n)})),Object(h.jsx)(De.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(Object.entries(I).flatMap((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object.entries(a).flatMap((function(e){var t=Object(u.a)(e,2),a=t[0];return t[1].map((function(e){return{xref:parseInt(e.xref,10),name:e.name,night:n,division_name:a}}))}))})).filter((function(e){return!!e.xref})));case 3:C(!1),L(""),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.error,L("failed to save teams: ".concat(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},errorMessage:E})]})]})},Qe=n(13),Ve=n(98),$e=Object(T.a)(Qe.b)(Je||(Je=Object(M.a)(["\n  ","\n"])),(function(e){var t=e.theme,n=e.win,a=e.loss;return n?{backgroundColor:t.colors.lg.green.light2}:a?{backgroundColor:t.colors.lg.red.light2}:{}}));var Ze=function(e){var t=e.playerMatches,n=e.selfTeamXref;return Object(h.jsx)(Qe.c,{data:t,columns:[Object(h.jsx)(Qe.d,{label:"Player"}),Object(h.jsx)(Qe.d,{label:"HCP"}),Object(h.jsx)(Qe.d,{label:"Games"}),Object(h.jsx)(Qe.d,{label:"Opponent"}),Object(h.jsx)(Qe.d,{label:"HCP"}),Object(h.jsx)(Qe.d,{label:"Games"})],children:function(e){var t=e.datum,a=t.players.find((function(e){return e.team.xref===n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},r=t.players.find((function(e){return e.team.xref!==n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};return Object(h.jsxs)($e,{win:a.win,loss:a.loss,children:[Object(h.jsx)(Qe.a,{children:a.name}),Object(h.jsx)(Qe.a,{children:a.handicap}),Object(h.jsx)(Qe.a,{children:a.games_won}),Object(h.jsx)(Qe.a,{children:r.name}),Object(h.jsx)(Qe.a,{children:r.handicap}),Object(h.jsx)(Qe.a,{children:r.games_won})]},t._id)}})};var et,tt=function(e){var t=e.playerMatches,n=e.selfTeamXref,r=Object(a.useMemo)((function(){return t.reduce((function(e,t){var a=t.players.find((function(e){return e.team.xref===n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},r=t.players.find((function(e){return e.team.xref!==n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},a.xref,Object(de.a)(Object(de.a)({},e[a.xref]||{}),{},Object(be.a)({},t.week_num,[].concat(Object(ze.a)((e[a.xref]||{})[t.week_num]||[]),[{xref:a.xref,name:a.name,handicap:a.handicap,wins:a.win?1:0,losses:a.loss?1:0,gamesWon:a.games_won,gamesLost:r.games_won,doubles:0,gamePct:0}])))))}),{})}),[t,n]),c=Object(a.useMemo)((function(){var e=Object.entries(r).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1],r={xref:0,name:"",handicap:0,doubles:0,wins:0,losses:0,gamesWon:0,gamesLost:0,gamePct:0};return r.xref=parseInt(n,10),Object.values(a).forEach((function(e){for(var t=e.length>1,n=0;n<e.length;n++){var a=e[n],c=a.name,s=a.handicap,i=a.wins,o=a.losses,l=a.gamesWon,j=a.gamesLost;r.name=c,r.handicap=s,r.wins+=i,r.losses+=o,r.gamesWon+=l,r.gamesLost+=j,r.doubles=r.doubles+(t?1:0)}})),r.gamePct=r.gamesWon/(r.gamesWon+r.gamesLost),r}));return e.sort((function(e,t){return t.gamePct-e.gamePct})),e}),[r]);return Object(h.jsx)(Qe.c,{data:c,columns:[Object(h.jsx)(Qe.d,{label:"Name"}),Object(h.jsx)(Qe.d,{label:"HCP"}),Object(h.jsx)(Qe.d,{label:"DB's"}),Object(h.jsx)(Qe.d,{label:"W"}),Object(h.jsx)(Qe.d,{label:"L"}),Object(h.jsx)(Qe.d,{label:"GF"}),Object(h.jsx)(Qe.d,{label:"GA"}),Object(h.jsx)(Qe.d,{label:"PCT"})],children:function(e){var t=e.datum;return Object(h.jsxs)(Qe.b,{children:[Object(h.jsx)(Qe.a,{children:t.name}),Object(h.jsx)(Qe.a,{children:t.handicap}),Object(h.jsx)(Qe.a,{children:t.doubles}),Object(h.jsx)(Qe.a,{children:t.wins}),Object(h.jsx)(Qe.a,{children:t.losses}),Object(h.jsx)(Qe.a,{children:t.gamesWon}),Object(h.jsx)(Qe.a,{children:t.gamesLost}),Object(h.jsx)(Qe.a,{children:t.gamePct.toFixed(3)})]},t.xref)}})},nt=T.a.div(et||(et=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n  max-width: 720px;\n"])));var at,rt,ct,st=function(e){var t=e.open,n=e.playerMatches,r=e.setOpen,c=e.team,s=e.teamMatches,i=Object(a.useMemo)((function(){return s.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t._id,t))}),{})}),[s]),o=Object(a.useMemo)((function(){var e=n.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.match_id,[].concat(Object(ze.a)(e[t.match_id]||[]),[t])))}),{});return Object.entries(e).forEach((function(t){var n=Object(u.a)(t,2),a=n[0],r=n[1];r.sort((function(e,t){return e.seq-t.seq})),e[a]=r})),e}),[n]);return c?Object(h.jsx)(Ve.a,{open:t,setOpen:r,children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(h.jsx)(z.d,{children:c.name}),Object(h.jsx)(j.b,{to:c.name,children:"Detailed View"})]}),Object(h.jsx)(z.e,{style:{marginTop:"1rem"},children:"Player Results"}),Object(h.jsx)(tt,{playerMatches:n,selfTeamXref:c.xref}),Object(h.jsx)(z.e,{style:{marginTop:"1rem"},children:"Team Results"}),Object(h.jsx)(nt,{children:c.schedule.map((function(e){var t=e.display,n=e.match_id,a=e.opp,r=function(e,t){var n=t.teams.find((function(t){return t.xref===e}))||{xref:0,name:"",games_won:0,matches_won:0},a=t.teams.find((function(t){return t.xref!==e}))||{xref:0,name:"",games_won:0,matches_won:0};return{self:n,opp:a}}(c.xref,i[n||""]||{teams:[]});return Object(h.jsxs)(qe.a,{title:"".concat(t,": vs. ").concat(a.name),description:n?it(r):"",children:[!n&&Object(h.jsx)(h.Fragment,{children:"this match hasn't happened yet, do you want a scouting report?"}),n&&Object(h.jsx)(Ze,{playerMatches:o[n||""]||[],selfTeamXref:c.xref})]},t)}))})]})}):null};function it(e){var t=e.self,n=e.opp;return"".concat(t.win?"\u2705 Win":"\ud83d\udca9 Loss",": ").concat(t.matches_won,"-").concat(n.matches_won,", ").concat(t.games_won,"-").concat(n.games_won)}var ot=T.a.div(at||(at=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),lt=T.a.div(rt||(rt=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 1rem;\n"]))),jt=T.a.div(ct||(ct=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n"])));var ut=function(e){var t=e.playerMatches,n=e.season,r=e.teams,s=e.teamMatches,i=Object(c.e)(),o=Object(a.useMemo)((function(){return r.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.xref,t))}),{})}),[r]),l=Object(a.useMemo)((function(){return s.reduce((function(e,t){var n,a=0,r=t.teams.reduce((function(e,t){return a+=t.games_won,Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.xref,{gamesWon:e[t.xref].gamesWon+t.games_won,wins:e[t.xref].wins+(t.win?1:0),losses:e[t.xref].losses+(t.loss?1:0),gamesTotal:e[t.xref].gamesTotal}))}),(n={},Object(be.a)(n,t.teams[0].xref,e[t.teams[0].xref]||{wins:0,losses:0,gamesWon:0,gamesTotal:0}),Object(be.a)(n,t.teams[1].xref,e[t.teams[1].xref]||{wins:0,losses:0,gamesWon:0,gamesTotal:0}),n));return Object.values(r).forEach((function(e){e.gamesTotal+=a})),Object(de.a)(Object(de.a)({},e),r)}),{})}),[s]),j=Object(a.useMemo)((function(){var e=r.reduce((function(e,t){var n=l[t.xref]||{wins:0,losses:0,gamesWon:0,gamesTotal:0};return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.division_name,[].concat(Object(ze.a)(e[t.division_name]||[]),[{xref:t.xref,name:t.name,rank:0,wins:n.wins,losses:n.losses,pct:n.gamesWon/n.gamesTotal}])))}),{});return Object.entries(e).forEach((function(t){var n=Object(u.a)(t,2),a=n[0],r=n[1];r.sort((function(e,t){return e.wins===t.wins?e.losses===t.losses?t.pct-e.pct:e.losses-t.losses:t.wins-e.wins})),e[a]=r.map((function(e,t){return Object(de.a)(Object(de.a)({},e),{},{rank:t+1})}))})),e}),[r]),b=Object(a.useState)(0),d=Object(u.a)(b,2),m=d[0],f=d[1],O=Object(a.useState)([]),x=Object(u.a)(O,2),p=x[0],g=x[1],v=Object(a.useState)([]),y=Object(u.a)(v,2),w=y[0],k=y[1];return Object(a.useEffect)((function(){g(s.filter((function(e){return!!e.teams.some((function(e){return e.xref===m}))}))),k(t.filter((function(e){return e.players.some((function(e){return e.team.xref===m}))})))}),[m]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ot,{children:n.nights.map((function(e){return Object(h.jsxs)(lt,{children:[Object(h.jsx)(z.d,{style:{marginBottom:"1rem"},children:Re(e)}),n.divisions[e].map((function(e){return Object(h.jsx)(jt,{children:j[e]&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(z.e,{children:e}),Object(h.jsx)(Qe.c,{data:j[e],columns:[Object(h.jsx)(Qe.d,{label:"Place"}),Object(h.jsx)(Qe.d,{label:"Team Name"}),Object(h.jsx)(Qe.d,{label:"W's"}),Object(h.jsx)(Qe.d,{label:"L's"}),Object(h.jsx)(Qe.d,{label:"PCT."})],children:function(e){var t=e.datum;return Object(h.jsxs)(Qe.b,{children:[Object(h.jsx)(Qe.a,{children:t.rank}),Object(h.jsx)(Qe.a,{children:Object(h.jsx)(W.c,{style:{backgroundColor:"#ffffff",border:0,color:i.colors.lg.blue.base},onClick:function(){return f(t.xref)},children:t.name})}),Object(h.jsx)(Qe.a,{children:t.wins}),Object(h.jsx)(Qe.a,{children:t.losses}),Object(h.jsx)(Qe.a,{children:t.pct.toFixed(3)})]},t.xref)}})]})},e)}))]},e)}))}),Object(h.jsx)(st,{open:!!m,playerMatches:w,team:o[m],teamMatches:p,setOpen:function(e){e||f(0)}})]})};var bt=function(e){var t=e.seasons,n=e.loadPlayerMatches,r=e.loadTeams,c=e.loadTeamMatches,s=e.saveDivisions,i=e.saveTeams,o=Object(b.h)(),l=o.year,j=o.term,d=o.type,m=Object(a.useMemo)((function(){return t.find((function(e){return e.year+""===l&&e.term===j&&e.type===d}))}),[t,l,j,d]),f=Object(a.useState)([]),O=Object(u.a)(f,2),x=O[0],p=O[1];Object(a.useEffect)((function(){m&&r(m.xref).then(p)}),[r,m]);var g=Object(a.useState)([]),v=Object(u.a)(g,2),y=v[0],w=v[1];Object(a.useEffect)((function(){m&&c(m.xref).then(w)}),[c,m]);var k=Object(a.useState)([]),_=Object(u.a)(k,2),S=_[0],C=_[1];return Object(a.useEffect)((function(){m&&n(m.xref).then(C)}),[n,m]),m?Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/",element:Object(h.jsx)(ut,{season:m,playerMatches:S,teams:x,teamMatches:y})}),Object(h.jsx)(b.b,{path:"admin",element:Object(h.jsx)(Ke,{season:m,teams:x,saveDivisions:function(e){return s(m.xref,e)},saveTeams:function(e){return i(m.xref,e)}})})]}):Object(h.jsx)(Ge,{children:Object(h.jsx)(Ee.a,{variant:"danger",children:"The specified season does not exist, please check your URL."})})},dt=n(49);var mt,ft,Ot,ht=function(e){var t=e.saveSeason,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],b=Object(a.useState)(""),d=Object(u.a)(b,2),O=d[0],x=d[1],p=Object(a.useState)(""),g=Object(u.a)(p,2),v=g[0],y=g[1],w=Object(a.useState)(""),k=Object(u.a)(w,2),_=k[0],S=k[1],C=Object(a.useState)(!1),M=Object(u.a)(C,2),T=M[0],W=M[1],E=Object(a.useState)(!1),L=Object(u.a)(E,2),A=L[0],B=L[1],I=Object(a.useState)(!1),F=Object(u.a)(I,2),G=F[0],q=F[1],D=Object(a.useState)(!1),R=Object(u.a)(D,2),U=R[0],N=R[1],H=Object(a.useState)(!1),Y=Object(u.a)(H,2),X=Y[0],J=Y[1],K=Object(a.useState)(!1),Q=Object(u.a)(K,2),V=Q[0],$=Q[1],Z=Object(a.useState)(!1),ee=Object(u.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),re=Object(u.a)(ae,2),ce=re[0],se=re[1],ie=Object(a.useState)(""),oe=Object(u.a)(ie,2),le=oe[0],je=oe[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(me.b,{label:"Year",placeholder:"Choose a year...",value:c,onChange:s,children:Object(h.jsx)(me.a,{value:"2022",children:"2022"})}),Object(h.jsxs)(me.b,{label:"Term",placeholder:"Choose a term...",value:l,onChange:j,children:[Object(h.jsx)(me.a,{value:"winter",children:"Winter"}),Object(h.jsx)(me.a,{value:"spring",children:"Spring"}),Object(h.jsx)(me.a,{value:"summer",children:"Summer"}),Object(h.jsx)(me.a,{value:"fall",children:"Fall"})]}),Object(h.jsx)(me.b,{label:"League type",placeholder:"Choose a league...",value:O,onChange:x,children:Object(h.jsx)(me.a,{value:"team_8ball",children:"Team 8 Ball"})}),Object(h.jsx)(P.a,{label:"Amsterdam Key",description:"Enter the Amsterdam site season id",onChange:function(e){return y(e.target.value)},value:v}),Object(h.jsx)(P.a,{label:"Name",description:"Enter the season name",onChange:function(e){return S(e.target.value)},value:_}),Object(h.jsxs)("div",{children:[Object(h.jsx)(z.a,{children:"Select the nights the league plays on"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(dt.a,{label:"Monday",checked:T,onChange:function(e){return W(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Tuesday",checked:A,onChange:function(e){return B(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Wednesday",checked:G,onChange:function(e){return q(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Thursday",checked:U,onChange:function(e){return N(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Friday",checked:X,onChange:function(e){return J(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Saturday",checked:V,onChange:function(e){return $(e.target.checked)}}),Object(h.jsx)(dt.a,{label:"Sunday",checked:te,onChange:function(e){return ne(e.target.checked)}})]})]}),Object(h.jsx)(P.a,{label:"Season length",description:"Enter the number of weeks of the regular season",onChange:function(e){return se(e.target.value)},value:ce}),Object(h.jsx)(De.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(f.a)(Object(m.a)().mark((function e(n){var a,r,s,i,o,j,u;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a=0,e.prev=2,a=parseInt(c,10),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),je("invalid year value: ".concat(e.t0)),e.abrupt("return");case 10:if(r="winter",!Ue(l)){e.next=15;break}r=l,e.next=17;break;case 15:return je("invalid season term: ".concat(l)),e.abrupt("return");case 17:if(s="team_8ball","team_8ball"!==O){e.next=22;break}r=l,e.next=24;break;case 22:return je("invalid league type: ".concat(l)),e.abrupt("return");case 24:i=0,e.prev=25,i=parseInt(v,10),e.next=33;break;case 29:return e.prev=29,e.t1=e.catch(25),je("invalid amsterdam key: ".concat(e.t1)),e.abrupt("return");case 33:o=0,e.prev=34,o=parseInt(ce,10),e.next=42;break;case 38:return e.prev=38,e.t2=e.catch(34),je("invalid amsterdam key: ".concat(e.t2)),e.abrupt("return");case 42:return j=[],T&&j.push("monday"),A&&j.push("tuesday"),G&&j.push("wednesday"),U&&j.push("thursday"),X&&j.push("friday"),V&&j.push("saturday"),te&&j.push("sunday"),e.prev=50,e.next=53,t({year:a,term:r,type:s,xref:i,name:_,num_weeks:o,nights:j,divisions:j.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t,[]))}),{})});case 53:e.next=59;break;case 55:e.prev=55,e.t3=e.catch(50),u=e.t3.error,je("failed to save season: ".concat(u));case 59:case"end":return e.stop()}}),e,null,[[2,6],[25,29],[34,38],[50,55]])})));return function(t){return e.apply(this,arguments)}}()},errorMessage:le})]})},xt=T.a.div(mt||(mt=Object(M.a)([""]))),pt=T.a.div(ft||(ft=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),gt=T.a.div(Ot||(Ot=Object(M.a)(["\n  display: flex;\n  justify-content: space-between;\n"])));var vt=function(e){var t=e.seasons,n=e.saveSeason,r=Object(b.g)(),c=w().data,s=Object(a.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1];return c?Object(h.jsxs)(xt,{children:[Object(h.jsx)(z.d,{children:"Pick a season:"}),Object(h.jsxs)(pt,{children:[t.map((function(e){return Object(h.jsx)(se.a,{style:{minWidth:"360px"},onClick:function(){return r("".concat(e.year,"/").concat(e.term,"/").concat(e.type))},children:Object(h.jsxs)(gt,{children:[Object(h.jsx)(z.g,{children:e.name}),Object(h.jsx)(ee.a,{align:"bottom",justify:"start",trigger:Object(h.jsx)(W.c,{type:"button",size:"xsmall",onClick:function(e){return e.stopPropagation()},name:"options",children:Object(h.jsx)($.a,{glyph:"Ellipsis"})}),children:Object(h.jsx)(ee.b,{children:"Delete season"})})]})},e.xref)})),Object(h.jsx)(se.a,{style:{minWidth:"180px"},onClick:function(){return l(!0)},children:"Create a new season..."})]}),Object(h.jsx)(Ve.a,{open:o,setOpen:l,children:Object(h.jsx)(ht,{saveSeason:function(e){return n(e).then((function(){return l(!1)}))}})})]}):null};var yt,wt,kt,_t,St=function(){var e=w().data,t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){e&&e.seasons().find().then(c)}),[e]),e?Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/",element:Object(h.jsx)(vt,{seasons:r,saveSeason:function(t){return e.seasons().insertOne(t).then((function(e){var n=e.insertedId;return c([].concat(Object(ze.a)(r),[Object(de.a)(Object(de.a)({},t),{},{_id:n})]))}))}})}),Object(h.jsx)(b.b,{path:":year/:term/:type/*",element:Object(h.jsx)(bt,{seasons:r,loadPlayerMatches:function(t){return e.playerMatches().find({season_xref:t})},loadTeams:function(t){return e.teams().find({season_xref:t})},loadTeamMatches:function(t){return e.teamMatches().find({season_xref:t})},saveDivisions:function(t,n){return e.seasons().updateOne({xref:t},{$set:{divisions:n}}).then((function(e){if(1!==e.modifiedCount)throw new Error("failed to update season "+t);c(r.map((function(e){return e.xref!==t?e:Object(de.a)(Object(de.a)({},e),{},{divisions:n})})))}))},saveTeams:function(t,n){return e.teams().insertMany(n.map((function(e){return Object(de.a)(Object(de.a)({},e),{},{season_xref:t,schedule:[]})}))).then((function(){}))}})})]}):null},Ct=T.a.div(yt||(yt=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"]))),Mt=T.a.div(wt||(wt=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),Tt=T.a.div(kt||(kt=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 1rem;\n"]))),Wt=T.a.div(_t||(_t=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n"])));var Pt,zt,Et=function(e){var t=e.seasons,n=w().data,r=Object(a.useState)(),c=Object(u.a)(r,2),s=c[0],i=c[1],o=Object(a.useState)({}),l=Object(u.a)(o,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){n&&s&&Promise.all([n.teamMatches().find({season_xref:s.xref}),n.teams().find({season_xref:s.xref})]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1],r=n.reduce((function(e,t){var n,a=e[t.teams[0].xref]||{wins:0,losses:0,gamesWon:0,gamesTotal:0};a.gamesWon+=t.teams[0].games_won,a.gamesTotal+=t.teams[0].games_won+t.teams[1].games_won;var r=e[t.teams[1].xref]||{wins:0,losses:0,gamesWon:0,gamesTotal:0};return r.gamesWon+=t.teams[1].games_won,r.gamesTotal+=t.teams[1].games_won+t.teams[0].games_won,t.teams[0].win?(a.wins++,r.losses++):t.teams[1].win&&(a.losses++,r.wins++),Object(de.a)(Object(de.a)({},e),{},(n={},Object(be.a)(n,t.teams[0].xref,a),Object(be.a)(n,t.teams[1].xref,r),n))}),{}),c=a.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.division_name,[].concat(Object(ze.a)(e[t.division_name]||[]),[t])))}),{});b(Object.entries(c).reduce((function(e,t){var n=Object(u.a)(t,2),a=n[0],c=n[1].map((function(e){var t=r[e.xref];return Object(de.a)(Object(de.a)({},e),{},{rank:0,wins:t.wins,losses:t.losses,pct:t.gamesWon/t.gamesTotal})}));return c.sort((function(e,t){return e.wins===t.wins?e.losses===t.losses?t.pct-e.pct:e.losses-t.losses:t.wins-e.wins})),Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},a,c.map((function(e,t){return Object(de.a)(Object(de.a)({},e),{},{rank:t+1})}))))}),{}))}))}),[n,s]),n?Object(h.jsxs)(Ct,{children:[Object(h.jsx)(me.b,{style:{width:"360px"},label:"Choose a season:",placeholder:"Select...",value:(null===s||void 0===s?void 0:s.name)||"",onChange:function(e){return i(t.find((function(t){return t.name===e})))},children:t.map((function(e){var t=e.xref,n=e.name;return Object(h.jsx)(me.a,{value:n,children:n},t)}))}),s&&Object(h.jsx)(Mt,{children:s.nights.map((function(e){return Object(h.jsxs)(Tt,{children:[Object(h.jsx)(z.d,{style:{marginBottom:"1rem"},children:e}),s.divisions[e].map((function(e){return Object(h.jsx)(Wt,{children:j[e]&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(z.e,{children:e}),Object(h.jsx)(Qe.c,{data:j[e],columns:[Object(h.jsx)(Qe.d,{label:"Place"}),Object(h.jsx)(Qe.d,{label:"Team Name"}),Object(h.jsx)(Qe.d,{label:"W's"}),Object(h.jsx)(Qe.d,{label:"L's"}),Object(h.jsx)(Qe.d,{label:"PCT."})],children:function(e){var t=e.datum;return Object(h.jsxs)(Qe.b,{children:[Object(h.jsx)(Qe.a,{children:t.rank}),Object(h.jsx)(Qe.a,{children:t.name}),Object(h.jsx)(Qe.a,{children:t.wins}),Object(h.jsx)(Qe.a,{children:t.losses}),Object(h.jsx)(Qe.a,{children:t.pct.toFixed(3)})]},t.xref)}})]})},e)}))]},e)}))})]}):null},Lt=n(150),At=Object(T.a)(se.a)(Pt||(Pt=Object(M.a)(["\n  width: 328px;\n  display: flex;\n  justify-content: space-between;\n  background-color: ",";\n  ","\n"])),(function(e){return e.bg}),(function(e){return!e.first&&{marginTop:"1rem"}})),Bt=T.a.div(zt||(zt=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n"])));var It,Ft,Gt,qt,Dt=function(e){var t=e.first,n=e.matchup,a=Object(c.e)();return Object(h.jsxs)(At,{first:t,bg:n.self.win?a.colors.lg.green.light2:a.colors.lg.red.light2,children:[Object(h.jsxs)(Bt,{children:[Object(h.jsx)(z.g,{children:n.self.name}),Object(h.jsx)(z.a,{children:"Handicap: ".concat(n.self.handicap)}),Object(h.jsx)(z.a,{children:"Games Won: ".concat(n.self.games_won)})]}),Object(h.jsxs)(Bt,{children:[Object(h.jsx)(z.g,{children:n.opp.name}),Object(h.jsx)(z.a,{children:"Handicap: ".concat(n.opp.handicap)}),Object(h.jsx)(z.a,{children:"Games Won: ".concat(n.opp.games_won)})]})]})},Rt=T.a.div(It||(It=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"]))),Ut=T.a.div(Ft||(Ft=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),Nt=T.a.div(Gt||(Gt=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n  max-width: 720px;\n"]))),Ht=T.a.div(qt||(qt=Object(M.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 12px;\n"])));var Yt=function(e){var t=e.seasons,n=e.teams,r=w().data,c=Object(a.useState)(),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(),j=Object(u.a)(l,2),b=j[0],d=j[1],m=Object(a.useMemo)((function(){return n.find((function(e){return e.name===(null===b||void 0===b?void 0:b.name)}))}),[b,n]),f=Object(a.useState)({}),O=Object(u.a)(f,2),x=O[0],p=O[1],g=Object(a.useState)({}),v=Object(u.a)(g,2),y=v[0],k=v[1];return Object(a.useEffect)((function(){r&&Promise.all([r.teamMatches().find({season_xref:null===i||void 0===i?void 0:i.xref,"teams.xref":null===b||void 0===b?void 0:b.xref}),r.playerMatches().find({season_xref:null===i||void 0===i?void 0:i.xref,"players.team.xref":null===b||void 0===b?void 0:b.xref})]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];p(n.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t._id,t))}),{}));var r=a.reduce((function(e,t){return Object(de.a)(Object(de.a)({},e),{},Object(be.a)({},t.match_id,[].concat(Object(ze.a)(e[t.match_id]||[]),[t])))}),{});Object.entries(r).forEach((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];a.sort((function(e,t){return e.seq-t.seq})),r[n]=a})),k(r)}))}),[r,null===i||void 0===i?void 0:i.xref,null===b||void 0===b?void 0:b.xref,null===m||void 0===m?void 0:m.night]),r?Object(h.jsxs)(Rt,{children:[Object(h.jsxs)(Ut,{children:[Object(h.jsx)(me.b,{style:{width:"360px"},label:"Choose a season:",placeholder:"Select...",onChange:function(e){return o(t.find((function(t){return t.name===e})))},children:t.map((function(e){var t=e.xref,n=e.name;return Object(h.jsx)(me.a,{value:n,children:n},t)}))}),Object(h.jsx)(me.b,{style:{width:"360px"},label:"Choose a team:",placeholder:"Select...",disabled:!i,onChange:function(e){return d(n.find((function(t){return t.name===e})))},children:n.filter((function(e){return e.season_xref===(null===i||void 0===i?void 0:i.xref)})).map((function(e){var t=e.xref,n=e.name;return Object(h.jsx)(me.a,{value:n,children:n},t)}))})]}),b&&Object(h.jsx)(Nt,{children:((null===m||void 0===m?void 0:m.schedule)||[]).map((function(e){var t,n,a=e.display,r=e.match_id,c=e.opp,s=(t=x[r||""]||{teams:[]},n=null===b||void 0===b?void 0:b.xref,t.teams.reduce((function(e,t){return n===t.xref?Object(de.a)(Object(de.a)({},e),{},{self:t}):Object(de.a)(Object(de.a)({},e),{},{opp:t})}),{self:{xref:0,name:"",games_won:0,matches_won:0},opp:{xref:0,name:"",games_won:0,matches_won:0}})),i=y[r||""]||[],o=Object(Lt.a)(i),l=o[0],j=o[1],u=o[2],d=o[3],m=o.slice(4),f=Jt(l||{players:[]},null===b||void 0===b?void 0:b.xref),O=Jt(j||{players:[]},null===b||void 0===b?void 0:b.xref),p=Jt(u||{players:[]},null===b||void 0===b?void 0:b.xref),g=Jt(d||{players:[]},null===b||void 0===b?void 0:b.xref),v=m.length?Jt(m[0],null===b||void 0===b?void 0:b.xref):void 0;return Object(h.jsxs)(qe.a,{title:"".concat(a,": vs. ").concat(c.name),description:r?Xt(s):"",children:[!r&&Object(h.jsx)(h.Fragment,{children:"this match hasn't happened yet, do you want a scouting report?"}),r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Ht,{children:[Object(h.jsx)(Dt,{matchup:f}),Object(h.jsx)(Dt,{matchup:O})]}),Object(h.jsxs)(Ht,{children:[Object(h.jsx)(Dt,{matchup:p}),Object(h.jsx)(Dt,{matchup:g})]}),v&&Object(h.jsx)(Dt,{matchup:v})||null]})]},a)}))})]}):null};function Xt(e){var t=e.self,n=e.opp;return"".concat(t.win?"W":"L",": ").concat(t.games_won," - ").concat(n.games_won," (").concat(t.matches_won," - ").concat(n.matches_won,")")}function Jt(e,t){return e.players.reduce((function(e,n){return t===n.team.xref?Object(de.a)(Object(de.a)({},e),{},{self:n}):Object(de.a)(Object(de.a)({},e),{},{opp:n})}),{self:{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},opp:{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0}})}var Kt,Qt,Vt=function(){var e=w().data,t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){e&&e.seasons().find().then(c)}),[e]);var s=Object(a.useState)([]),i=Object(u.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){e&&e.teams().find().then(l)}),[e]);var j=Object(a.useState)([]),m=Object(u.a)(j,2),f=m[0],O=m[1];Object(a.useEffect)((function(){e&&e.players().find().then(O)}),[e]);var x=Object(d.useMediaQuery)({query:"(max-width: 720px)"});return Object(h.jsxs)(h.Fragment,{children:[x?Object(h.jsx)(ce,{}):Object(h.jsx)(V,{}),Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/",element:Object(h.jsx)(G,{children:Object(h.jsx)(ue,{})})}),Object(h.jsx)(b.b,{path:"seasons/*",element:Object(h.jsx)(G,{children:Object(h.jsx)(St,{})})}),Object(h.jsx)(b.b,{path:"/standings",element:Object(h.jsx)(G,{children:Object(h.jsx)(Et,{seasons:r})})}),Object(h.jsx)(b.b,{path:"team",element:Object(h.jsx)(G,{children:Object(h.jsx)(Yt,{seasons:r,teams:o})})}),Object(h.jsx)(b.b,{path:"players",element:Object(h.jsx)(G,{children:Object(h.jsx)(ve,{seasons:r,teams:o,players:f})})}),Object(h.jsx)(b.b,{path:"login",element:Object(h.jsx)(B,{})}),Object(h.jsx)(b.b,{path:"sandbox",element:Object(h.jsx)(Pe,{})})]})]})},$t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Zt="".concat("https://d2va9gm4j17fy9.cloudfront.net","/fonts"),en=Object(s.css)(Kt||(Kt=Object(M.a)(["\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: normal;\n    src: url('","/akzidgrostdreg.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdreg.eot?#iefix')\n        format('embedded-opentype'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdreg.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdreg.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: 600;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: bold;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  html {\n    font-family: 'Akzidenz', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-weight: normal;\n    font-style: normal;\n  }\n\n  body {\n    margin: 0;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: border-box;\n  }\n"])),Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt,Zt),tn=Object(s.css)(Qt||(Qt=Object(M.a)(["\n/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n"])));var nn=function(){return[tn,en]},an={colors:{black:"#000000",white:"#ffffff",offwhite:"#fffed1",grays:{base:"#282c34"},reds:{base:"#4d0a05",light1:"#8a1a10",light2:"#b42619",light3:"#df3121"},blues:{light1:"#61dafb"},lg:n(2).a},typography:{fonts:{code:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"}}};l.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(j.a,{basename:"/amsterdam",children:Object(h.jsx)(p,{children:Object(h.jsx)(y,{children:Object(h.jsx)(i.c,{children:Object(h.jsxs)(c.f,{theme:an,children:[Object(h.jsx)(s.Global,{styles:nn}),Object(h.jsx)(Vt,{})]})})})})})})),$t()}},[[259,1,2]]]);
//# sourceMappingURL=main.981cb58b.chunk.js.map