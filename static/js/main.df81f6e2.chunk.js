(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{251:function(e,t){},253:function(e,t){},309:function(e,t,n){"use strict";n.r(t);var a,r,c,s=n(1),i=n.n(s),o=n(32),l=n(3),j=n(19),u=n(161),d=n.n(u),b=n(25),f=n(17),O=n(103),m=n(8),h=n(14),x=n(15),p=n(24),g=n(40),v=n(13),y=n(11),w=n(18),k=n(106),_=n(4),S=Object(s.createContext)(null),C=function(e){var t=e.children;var n=new k.a({id:"amsterdam-ussnf",baseUrl:Object({NODE_ENV:"production",PUBLIC_URL:"/amsterdam",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_REALM_APP_ID:"amsterdam-ussnf"}).REACT_APP_REALM_BASE_URL}),a=Object(s.useState)(n.currentUser),r=Object(m.a)(a,2),c=r[0],i=r[1],o=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t,a){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.logIn(k.b.emailPassword(t,a));case 3:return i(n.currentUser),e.abrupt("return",n.currentUser);case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(w.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.logIn(k.b.anonymous());case 3:return i(n.currentUser),e.abrupt("return",n.currentUser);case 7:return e.prev=7,e.t0=e.catch(0),console.error("failed to login",e.t0),i(null),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.currentUser){e.next=4;break}return e.next=4,n.currentUser.logOut();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("failed to logout",e.t0);case 9:return e.prev=9,i(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(S.Provider,{value:{login:o,loginAnonymous:l,logout:j,user:c},children:t})},T=function(){var e=Object(s.useContext)(S);if(null===e)throw new Error("useRealm() called outside of a RealmProvider");return e},B=Object(s.createContext)(null),L=function(e){var t=e.children,n=T().user,a=Object(s.useState)(null),r=Object(m.a)(a,2),c=r[0],i=r[1];return Object(s.useEffect)((function(){null!==n&&i(n.mongoClient("data"))}),[n]),Object(_.jsx)(B.Provider,{value:{data:M(c)},children:t})},W=function(){var e=Object(s.useContext)(B);if(null===e)throw new Error("useAtlas() called outside of a AtlasProvider");return e};function M(e){return e?{players:function(){return e.db("amsterdam").collection("players")},seasons:function(){return e.db("amsterdam").collection("seasons")},teams:function(){return e.db("amsterdam").collection("teams")},teamMatches:function(){return e.db("amsterdam").collection("team_matches")},playerMatches:function(){return e.db("amsterdam").collection("player_matches")}}:null}var P=x.a.div(a||(a=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),A=x.a.div(r||(r=Object(h.a)(["\n  min-width: 360px;\n  padding: 1rem;\n  border: 1px solid;\n"]))),E=x.a.div(c||(c=Object(h.a)(["\n  min-width: 360px;\n  padding: 0 1rem 1rem 1rem;\n  margin-top: 0.5rem;\n"])));var z=function(){var e,t,n=Object(f.f)(),a=Object(s.useState)(""),r=Object(m.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(""),l=Object(m.a)(o,2),j=l[0],u=l[1],d=T(),b=d.login,O=d.loginAnonymous,h=d.user,x=(null===(e=n.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return h?Object(_.jsx)(f.a,{to:x,replace:!0}):Object(_.jsxs)(P,{children:[Object(_.jsxs)(A,{children:[Object(_.jsx)(v.a,{style:{marginBottom:"1rem"},children:"Please log in using your credentials"}),Object(_.jsx)(g.a,{label:"Username",placeholder:"your.email@example.com",onChange:function(e){i(e.target.value)},value:c}),Object(_.jsx)(g.a,{label:"Password",type:"password",onChange:function(e){u(e.target.value)},value:j}),Object(_.jsx)(p.c,{style:{marginTop:"1rem"},variant:"primary",onClick:function(){return b(c,j)},children:"Login"})]}),Object(_.jsxs)(E,{children:[Object(_.jsx)(v.a,{style:{marginBottom:"0.5rem"},children:"Or log in as a guest"}),Object(_.jsx)(p.c,{variant:"primaryOutline",onClick:function(){return O()},children:"Login Anonymously"})]})]})};var R,F,I=function(e){var t=e.children,n=T().user,a=Object(f.f)();return n?t:Object(_.jsx)(f.a,{to:"/login",state:{from:a},replace:!0})},X=n(164),D=Object(l.keyframes)(R||(R=Object(h.a)(["\n  from {\n    transform: rotate(-5deg);\n  }\n  to {\n    transform: rotate(5deg);\n  }\n"]))),q=Object(x.a)(X.a)(F||(F=Object(h.a)(["\n  display: inline-block;\n  margin: 24px;\n  animation: "," 3s infinite alternate-reverse ease-in-out;\n  transform-origin: 50% 100%;\n"])),D);var G,U,N,H=function(){return Object(_.jsx)(q,{style:{marginTop:0,marginBottom:0},height:48})},J=x.a.div(G||(G=Object(h.a)(["\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  grid-column-gap: 5px;\n  justify-items: center;\n  margin-top: 0.5rem;\n"]))),K=x.a.ul(U||(U=Object(h.a)(["\n  margin-right: auto;\n  text-align: left;\n  display: flex;\n"]))),V=x.a.div(N||(N=Object(h.a)(["\n  margin-left: auto;\n  text-align: right;\n  padding-right: 0.5rem;\n"])));var Y,Q=function(){var e=Object(f.g)(),t=T(),n=t.logout,a=t.user;return Object(_.jsxs)(J,{children:[Object(_.jsx)(K,{children:Object(_.jsx)(b.b,{style:{margin:"1rem",textDecoration:"none"},to:"/seasons",children:"Seasons"})}),Object(_.jsxs)("span",{style:{textAlign:"center",cursor:"pointer"},onClick:function(){return e("/")},children:[Object(_.jsx)(v.c,{children:"Amsterdam Billiards"}),Object(_.jsx)(H,{})]}),a&&Object(_.jsxs)(V,{children:[Object(_.jsx)(p.c,{variant:"primaryOutline",onClick:n,children:"Logout"}),Object(_.jsx)(v.a,{children:"anon-user"===a.providerType?"Guest":a.profile.email||a.id})]})]})},$=n(30),Z=n(33),ee=n(41),te=x.a.header(Y||(Y=Object(h.a)(["\n  margin-top: 0.5rem;\n  display: flex;\n  justify-items: space-between;\n  align-items: center;\n"])));var ne,ae,re,ce=function(){var e=Object(s.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],r=T(),c=r.logout,i=r.user;return Object(_.jsxs)(te,{children:[Object(_.jsx)(H,{}),Object(_.jsx)(v.c,{style:{flex:1},children:"Amsterdam Billiards"}),Object(_.jsxs)(ee.a,{align:"bottom",justify:"end",open:n,trigger:Object(_.jsx)(Z.a,{size:"xlarge","aria-label":"User Menu",onClick:function(){return a(!n)},children:Object(_.jsx)($.a,{glyph:"Ellipsis"})}),children:[Object(_.jsx)(ee.b,{href:"/amsterdam",children:"Standings"}),Object(_.jsx)(ee.b,{href:"/amsterdam/team",children:"Team Results"}),Object(_.jsx)(ee.b,{href:"/amsterdam/players",children:"Individual Results"}),Object(_.jsx)(ee.c,{}),!i&&Object(_.jsx)(ee.b,{href:"/amsterdam/login",children:"Login"}),i&&Object(_.jsx)(ee.b,{onClick:c,description:"anon-user"===i.providerType?"As guest":i.profile.email||i.id,children:"Logout"})]})]})},se=n(57),ie=x.a.div(ne||(ne=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n"]))),oe=x.a.ol(ae||(ae=Object(h.a)(["\n  list-style: auto;\n"]))),le=x.a.ol(re||(re=Object(h.a)(["\n  list-style: disc;\n  margin-left: 1rem;\n"])));var je,ue=function(){return Object(_.jsxs)(ie,{children:[Object(_.jsx)(v.d,{children:"Welcome to Amsterdam Billiards Information"}),Object(_.jsxs)(se.a,{children:[Object(_.jsx)(p.c,{href:"http://amsterdambilliards.com/",target:"_blank",rel:"noopener noreferrer",children:"Official Amsterdam Billiards & Bar website"}),Object(_.jsx)(p.c,{href:"/amsterdam/seasons/2022/summer/team_8ball",children:"Team 8-Ball League Site"})]}),Object(_.jsx)(v.e,{children:"Why You Should Join an Amsterdam Billiards League:"}),Object(_.jsxs)(oe,{children:[Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"The leagues are for players of all levels, including beginners and Pros"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"You'll have fun"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"You'll improve your pool game"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"It's a great way to meet other pool players"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"The leagues are co-ed"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"They're inexpensive"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"The prizes are great"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"They're easy to join (just sign up in the club at the front desk or by clicking 'Register Now!' on this page)"})}),Object(_.jsxs)("li",{children:[Object(_.jsx)(v.a,{children:"You get a lot of free stuff:"}),Object(_.jsxs)(le,{children:[Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"Play pool for free for a week"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"3 hours of free play every week while the league lasts"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"Get a dollar off all drinks while you're playing in the leagues"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"Mid-Season league party"})}),Object(_.jsx)("li",{children:Object(_.jsx)(v.a,{children:"League Finals & Registration signup party"})})]})]})]}),Object(_.jsx)(p.c,{href:"https://amsterdambilliards.com/leagues/",target:"_blank",rel:"noopener noreferrer",children:"Register Now!"})]})},de=n(26),be=n(7),fe=n(16),Oe=n(168),me=n.n(Oe),he=n(104),xe=x.a.div(je||(je=Object(h.a)(["\n  margin: 0 auto;\n  max-width: 62%;\n  @media (max-width: 720px) {\n    max-width: 100%;\n  }\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])));var pe,ge=function(e){return Object(_.jsxs)(xe,{children:[Object(_.jsx)(he.a,{variant:"info",style:{margin:"1rem 0"},children:"Please wait while we load the season data."}),Object(_.jsx)(me.a,{color:"gray"})]})},ve=n(56),ye=["children"],we=Object(x.a)(p.c)(pe||(pe=Object(h.a)(["\n  border: 0;\n  background: none;\n  color: ",";\n  &:hover {\n    background: none;\n    box-shadow: none;\n    text-decoration: underline;\n  }\n"])),(function(e){return e.theme.colors.lg.blue.base}));var ke,_e,Se,Ce,Te=function(e){var t=e.children,n=Object(ve.a)(e,ye);return Object(_.jsx)(we,Object(be.a)(Object(be.a)({},n),{},{children:t}))},Be=n(74),Le=n(72),We=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},Me=["January","February","March","April","May","June","July","August","September","October","November","December"],Pe=function(e){var t="th";return 1===e?t="st":2===e?t="nd":3===e&&(t="rd"),e+t},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:e}},Ee=function(e){switch(e){case"winter":case"spring":case"summer":case"fall":return!0}return!1},ze=x.a.div(ke||(ke=Object(h.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),Re=x.a.div(_e||(_e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  :not(:first-of-type) {\n    margin-left: 2rem;\n  }\n"]))),Fe=x.a.div(Se||(Se=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n"]))),Ie=x.a.div(Ce||(Ce=Object(h.a)(["\n  display: flex;\n"])));var Xe,De,qe=function(e){var t=e.season,n=e.teams,a=e.saveDivisions,r=e.saveTeams,c=Object(f.g)(),i=Object(s.useState)(!Object.values(t.divisions).reduce((function(e,t){return e+t.length}),0)),o=Object(m.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(""),d=Object(m.a)(u,2),b=d[0],O=d[1],h=Object(s.useState)(t.nights.reduce((function(e,n){var a=t.divisions[n]||[];return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},n,a.length>0?a:[""]))}),{})),x=Object(m.a)(h,2),k=x[0],S=x[1],C=Object(s.useState)(!!Object.values(t.divisions).reduce((function(e,t){return e+t.length}),0)),T=Object(m.a)(C,2),B=T[0],L=T[1],W=Object(s.useState)(""),M=Object(m.a)(W,2),P=M[0],A=M[1],E=Object(s.useState)({}),z=Object(m.a)(E,2),R=z[0],F=z[1];return Object(s.useEffect)((function(){F(Object.entries(k).reduce((function(e,t){var a=Object(m.a)(t,2),r=a[0],c=a[1];return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},r,c.reduce((function(e,t){var a=n.filter((function(e){return e.division_name===t})).map((function(e){return{xref:e.xref+"",name:e.name}}));return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t,a.length>0?a:[{xref:"",name:""}]))}),{})))}),{}))}),[t,n,k]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(p.c,{variant:"primaryOutline",onClick:function(){return c("..")},children:"Back to Dashboard"}),Object(_.jsxs)(Be.a,{title:"Admin: Divisions",description:"Make sure the league divisions are correct",isOpen:l,onClick:function(){return j(!l)},children:[Object(_.jsx)(ze,{children:t.nights.map((function(e){return Object(_.jsxs)(Re,{children:[Object(_.jsxs)(Fe,{children:[Object(_.jsx)(v.h,{children:We(e)}),Object(_.jsx)(p.c,{size:"xsmall",onClick:function(){return S(Object(be.a)(Object(be.a)({},k),{},Object(fe.a)({},e,[].concat(Object(de.a)(k[e]||[]),[""]))))},children:"+"})]}),(k[e]||[]).map((function(t,n){return Object(_.jsx)(g.a,{style:{marginBottom:"0.5rem"},label:"Division #".concat(n),value:t,onChange:function(t){return S(Object(be.a)(Object(be.a)({},k),{},Object(fe.a)({},e,(k[e]||[]).map((function(e,a){return a===n?t.target.value:e})))))}},t+n)}))]},e)}))}),Object(_.jsx)(Le.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a(k),j(!1),L(!0),O("")}catch(t){n=t.error,O("failed to save divisions: ".concat(n))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},errorMessage:b})]}),Object(_.jsxs)(Be.a,{title:"Admin: Teams",description:"Make sure the league teams are correct",isOpen:B,onClick:function(){return L(!B)},children:[Object.entries(R).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(_.jsx)(ze,{children:Object.entries(a).map((function(e){var t=Object(m.a)(e,2),a=t[0],r=t[1];return Object(_.jsxs)(Re,{children:[Object(_.jsxs)(Fe,{children:[Object(_.jsx)(v.h,{children:a}),Object(_.jsx)(p.c,{size:"xsmall",onClick:function(){return F(Object(be.a)(Object(be.a)({},R),{},Object(fe.a)({},n,Object(be.a)(Object(be.a)({},R[n]||{}),{},Object(fe.a)({},a,[].concat(Object(de.a)((R[n]||{})[a]||[]),[{xref:"",name:""}]))))))},children:"+"})]}),r.map((function(e,t){return Object(_.jsxs)(Ie,{children:[Object(_.jsx)(g.a,{label:"Team #".concat(t," Key"),value:e.xref,onChange:function(e){return F(Object(be.a)(Object(be.a)({},R),{},Object(fe.a)({},n,Object(be.a)(Object(be.a)({},R[n]||{}),{},Object(fe.a)({},a,((R[n]||{})[a]||[]).map((function(n,a){return a===t?Object(be.a)(Object(be.a)({},n),{},{xref:e.target.value}):n})))))))}}),Object(_.jsx)(g.a,{label:"Team #".concat(t," Name"),value:e.name,onChange:function(e){return F(Object(be.a)(Object(be.a)({},R),{},Object(fe.a)({},n,Object(be.a)(Object(be.a)({},R[n]||{}),{},Object(fe.a)({},a,((R[n]||{})[a]||[]).map((function(n,a){return a===t?Object(be.a)(Object(be.a)({},n),{},{name:e.target.value}):n})))))))}})]},t)}))]},a)}))},n)})),Object(_.jsx)(Le.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(Object.entries(R).flatMap((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object.entries(a).flatMap((function(e){var t=Object(m.a)(e,2),a=t[0];return t[1].map((function(e){return{xref:parseInt(e.xref,10),name:e.name,night:n,division_name:a}}))}))})).filter((function(e){return!!e.xref})));case 3:L(!1),A(""),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.error,A("failed to save teams: ".concat(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},errorMessage:P})]})]})},Ge=n(102),Ue=n(10),Ne=x.a.div(Xe||(Xe=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),He=x.a.div(De||(De=Object(h.a)(["\n  align-self: stretch;\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  grid-column-gap: 5px;\n"])));var Je=function(e){var t=e.modalView,n=e.team,a=e.teamRecord;if(!n)return null;var r="".concat(n.name," (").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{wins:0,losses:0};return"".concat(e.wins,"-").concat(e.losses)}(a),")");return t?Object(_.jsxs)(Ne,{children:[Object(_.jsx)(v.d,{children:r}),Object(_.jsx)(b.b,{to:n.xref+"",children:"Detailed View"})]}):Object(_.jsxs)(He,{children:[Object(_.jsx)(v.d,{style:{gridColumn:2},children:r}),Object(_.jsx)(b.b,{to:"..",style:{marginLeft:"auto",textAlign:"right"},children:"Back to Standings"})]})};var Ke,Ve=function(e){var t=e.linkToPlayers,n=void 0===t?"players":t,a=e.playerMatches,r=e.selfTeamXref,c=Object(f.g)(),i=Object(s.useMemo)((function(){var e={},t={wins:0,losses:0,gamesWon:0,gamesLost:0},n=Object.entries(a.reduce((function(n,a){var c=a.players.find((function(e){return e.team.xref===r}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},s=a.players.find((function(e){return e.team.xref!==r}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};"TB"!==a.type&&(e[c.xref]||(e[c.xref]={}),e[c.xref][a.week_num]||(e[c.xref][a.week_num]=0),e[c.xref][a.week_num]++);var i=n[c.xref]||function(){return{xref:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",handicap:0,doubles:0,wins:0,losses:0,gamesWon:0,gamesLost:0,gamePct:0}}(c.xref,c.name);return i.handicap=c.handicap,i.wins+=c.win?1:0,i.losses+=c.loss?1:0,i.gamesWon+=c.games_won,i.gamesLost+=s.games_won,t.wins+=c.win?1:0,t.losses+=c.loss?1:0,t.gamesWon+=c.games_won,t.gamesLost+=s.games_won,Object(be.a)(Object(be.a)({},n),{},Object(fe.a)({},c.xref,i))}),{})).map((function(t){var n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(be.a)(Object(be.a)({},r),{},{gamePct:r.gamesWon/(r.gamesWon+r.gamesLost),doubles:Object.values(e[a]||{}).filter((function(e){return e>1})).length})}));return n.sort((function(e,t){return t.gamePct-e.gamePct})),n.push(Object(be.a)({noLink:!0,xref:0,name:"Totals",handicap:"",doubles:"",gamePct:t.gamesWon/(t.gamesWon+t.gamesLost)},t)),n}),[a,r]);return Object(_.jsx)(Ue.c,{data:i,columns:[Object(_.jsx)(Ue.d,{label:"Name"}),Object(_.jsx)(Ue.d,{label:"HCP"}),Object(_.jsx)(Ue.d,{label:"DB's"}),Object(_.jsx)(Ue.d,{label:"W"}),Object(_.jsx)(Ue.d,{label:"L"}),Object(_.jsx)(Ue.d,{label:"GF"}),Object(_.jsx)(Ue.d,{label:"GA"}),Object(_.jsx)(Ue.d,{label:"PCT"})],children:function(e){var t=e.datum;return Object(_.jsxs)(Ue.b,{children:[Object(_.jsx)(Ue.a,{children:t.noLink?t.name:Object(_.jsx)(Te,{onClick:function(){return c(n,{state:{xref:t.xref+""}})},children:t.name})}),Object(_.jsx)(Ue.a,{children:t.handicap}),Object(_.jsx)(Ue.a,{children:t.doubles}),Object(_.jsx)(Ue.a,{children:t.wins}),Object(_.jsx)(Ue.a,{children:t.losses}),Object(_.jsx)(Ue.a,{children:t.gamesWon}),Object(_.jsx)(Ue.a,{children:t.gamesLost}),Object(_.jsx)(Ue.a,{children:t.gamePct.toFixed(3)})]},t.xref)}})},Ye=n(108),Qe=x.a.div(Ke||(Ke=Object(h.a)(["\n  margin-bottom: 1rem;\n  display: grid;\n  grid-template-columns: 90px 270px;\n"])));var $e,Ze=function(e){var t=e.handicaps,n=e.record,a=e.team;return Object(_.jsxs)(Qe,{children:[Object(_.jsx)(v.g,{children:"Record:"}),Object(_.jsx)(v.a,{children:"".concat(n.wins,"-").concat(n.losses,", ").concat(et(n.streak))}),Object(_.jsx)(v.g,{children:"Plays for:"}),Object(_.jsx)(v.a,{children:a.name}),Object(_.jsx)(v.g,{children:"Handicap:"}),Object(_.jsx)("div",{children:t.map((function(e){var t=e.value,n=e.lastWeek;return Object(_.jsx)(v.a,{children:"".concat(t).concat(n?" (until: Week ".concat(n,")"):"")},n||"current")}))})]})};function et(e){return(e>0?"W":"L")+Math.abs(e)}var tt=Object(x.a)(Ue.b,{shouldForwardProp:function(e){return"win"!==e&&"loss"!==e&&"noBorder"!==e}})($e||($e=Object(h.a)(["\n  ","\n  ","\n"])),(function(e){var t=e.theme;return!e.noBorder&&{borderTop:"1px solid ".concat(t.colors.lg.gray.light1)}}),(function(e){var t=e.theme,n=e.win,a=e.loss;return n?{backgroundColor:t.colors.lg.green.light2}:a?{backgroundColor:t.colors.lg.red.light2}:{}}));var nt,at,rt,ct,st,it=function(e){var t=e.matches,n=e.xref,a=Object(f.g)(),r=Object(s.useState)([]),c=Object(m.a)(r,2),i=c[0],o=c[1];return Object(s.useEffect)((function(){var e={};o(t.map((function(t){var n=!1;return e[t.week_num]?n=!0:e[t.week_num]=!0,Object(be.a)(Object(be.a)({},t),{},{noBorder:n})})))}),[t]),Object(_.jsx)(Ue.c,{data:i,columns:[Object(_.jsx)(Ue.d,{label:"Week"}),Object(_.jsx)(Ue.d,{label:"Date"}),Object(_.jsx)(Ue.d,{label:"Matchup"}),Object(_.jsx)(Ue.d,{label:"Opp Player"}),Object(_.jsx)(Ue.d,{label:"Opp Team"}),Object(_.jsx)(Ue.d,{label:"Round"}),Object(_.jsx)(Ue.d,{label:"Games Won"}),Object(_.jsx)(Ue.d,{label:"Games Lost"}),Object(_.jsx)(Ue.d,{label:"Notes"})],children:function(e){var t,r=e.datum,c=r.players.find((function(e){return e.xref+""===n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},s=r.players.find((function(e){return e.xref+""!==n}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};return Object(_.jsxs)(tt,{win:c.win,loss:c.loss,noBorder:r.noBorder,children:[Object(_.jsx)(Ue.a,{children:r.week_num}),Object(_.jsx)(Ue.a,{children:"".concat((t=r.date.getMonth(),Me[t])," ").concat(Pe(r.date.getDate()))}),Object(_.jsx)(Ue.a,{children:"".concat(c.handicap," vs ").concat(s.handicap)}),Object(_.jsx)(Ue.a,{children:Object(_.jsx)(Te,{onClick:function(){return a(".",{state:{xref:s.xref+""}})},children:s.name})}),Object(_.jsx)(Ue.a,{children:Object(_.jsx)(Te,{onClick:function(){return a("../".concat(s.team.xref))},children:s.team.name})}),Object(_.jsx)(Ue.a,{children:r.type}),Object(_.jsx)(Ue.a,{children:c.games_won}),Object(_.jsx)(Ue.a,{children:s.games_won}),Object(_.jsx)(Ue.a,{children:r.forfeit?"Forfeit":""})]},r.match_id)}})},ot=n(35),lt=n(128),jt=["name"],ut=x.a.div(nt||(nt=Object(h.a)(["\n  margin-top: 1rem;\n  display: flex;\n  flex-direction: column;\n  width: 720px;\n  @media (max-width: 720px) {\n    max-width: 100%;\n  }\n"]))),dt=x.a.div(at||(at=Object(h.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),bt=x.a.div(rt||(rt=Object(h.a)(["\n  margin-left: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ft=x.a.label(ct||(ct=Object(h.a)(["\n  font-size: 12px;\n  font-weight: bold;\n"]))),Ot=Object(x.a)(Ue.b,{shouldForwardProp:function(e){return"noBorder"!==e}})(st||(st=Object(h.a)(["\n  ","\n"])),(function(e){var t=e.theme;return!e.noBorder&&{borderTop:"1px solid ".concat(t.colors.lg.gray.light1)}}));var mt,ht,xt=function(e){var t=e.handicaps,n=e.matches,a=e.xref,r=Object(s.useMemo)((function(){var e={};return t.filter((function(t){var n=t.value;return!e[n]&&(e[n]=!0,!0)})).map((function(e){return e.value+""}))}),[t]),c=Object(s.useState)(""),i=Object(m.a)(c,2),o=i[0],l=i[1],j=Object(s.useState)(!1),u=Object(m.a)(j,2),d=u[0],b=u[1],f=Object(s.useState)(!0),O=Object(m.a)(f,2),h=O[0],x=O[1],p=Object(s.useState)([]),g=Object(m.a)(p,2),y=g[0],w=g[1];return Object(s.useEffect)((function(){var e,t=n.reduce((function(e,t){var n,r=t.players.find((function(e){return e.xref+""===a}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},c=t.players.find((function(e){return e.xref+""!==a}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};if(h&&t.forfeit)return e;if(o&&r.handicap+""!==o)return e;n=r.handicap+c.handicap>10?"long":"short",r.win?(e.races[n].wins++,e.races[n].diffWins+=r.games_won-c.games_won):(e.races[n].losses++,e.races[n].diffLosses+=c.games_won-r.games_won),e.races[n].gamesWon+=r.games_won,e.races[n].gamesLost+=c.games_won,e.races[n].weeks.unshift(t.week_num),r.win?(e.rounds[t.type].wins++,e.rounds[t.type].diffWins+=r.games_won-c.games_won):(e.rounds[t.type].losses++,e.rounds[t.type].diffLosses+=c.games_won-r.games_won),e.rounds[t.type].gamesWon+=r.games_won,e.rounds[t.type].gamesLost+=c.games_won,e.rounds[t.type].weeks.unshift(t.week_num);var s=e.matchups[c.handicap-r.handicap]||{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]};return r.win?(s.wins++,s.diffWins+=r.games_won-c.games_won):(s.losses++,s.diffLosses+=c.games_won-r.games_won),s.gamesWon+=r.games_won,s.gamesLost+=c.games_won,s.weeks.unshift(t.week_num),e.matchups[c.handicap-r.handicap]=s,r.win?(e.total.wins++,e.total.diffWins+=r.games_won-c.games_won):(e.total.losses++,e.total.diffLosses+=c.games_won-r.games_won),e.total.gamesWon+=r.games_won,e.total.gamesLost+=c.games_won,e.total.weeks.unshift(t.week_num),e}),{matchups:{},races:{long:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]},short:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]}},rounds:{R1:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]},R2:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]},TB:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]}},total:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]}});d?((e=Object.entries(t.matchups).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(be.a)({name:n},a)}))).sort((function(e,t){return parseInt(t.name,10)-parseInt(e.name,10)})),e=e.map((function(e){var t=e.name,n=Object(ve.a)(e,jt);return Object(be.a)({name:gt(t)},n)}))):e=Object.entries(Object.entries(t.matchups).reduce((function(e,t){var n,a,r=Object(m.a)(t,2),c=r[0],s=r[1];return e[a=c>"0"?"up":c<"0"?"down":"even"].wins+=s.wins,e[a].losses+=s.losses,e[a].gamesWon+=s.gamesWon,e[a].gamesLost+=s.gamesLost,e[a].diffWins+=s.diffWins,e[a].diffLosses+=s.diffLosses,(n=e[a].weeks).push.apply(n,Object(de.a)(s.weeks)),e[a].weeks.sort((function(e,t){return e-t})),e}),{up:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]},even:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]},down:{wins:0,losses:0,gamesWon:0,gamesLost:0,diffWins:0,diffLosses:0,weeks:[]}})).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(be.a)({name:pt(n)},a)})),w([Object(be.a)(Object(be.a)({name:"Totals"},t.total),{},{noBorder:!1})].concat(Object(de.a)(Object.entries(t.races).filter((function(e){var t=Object(m.a)(e,2);t[0];return t[1].weeks.length})).map((function(e,t){var n,a=Object(m.a)(e,2),r=a[0],c=a[1];return Object(be.a)(Object(be.a)({name:(n=r,n.charAt(0).toUpperCase()+n.substring(1)+" race")},c),{},{noBorder:0!==t})}))),Object(de.a)(Object.entries(t.rounds).filter((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return"TB"!==n||a.weeks.length})).map((function(e,t){var n=Object(m.a)(e,2),a=n[0],r=n[1];return Object(be.a)(Object(be.a)({name:vt(a)},r),{},{noBorder:0!==t})}))),Object(de.a)(e.filter((function(e){return e.weeks.length})).map((function(e,t){return Object(be.a)(Object(be.a)({},e),{},{noBorder:0!==t})})))))}),[n,o,d,h,a]),Object(_.jsxs)(ut,{children:[Object(_.jsxs)(dt,{children:[Object(_.jsx)(v.h,{style:{flex:1},children:"Player Splits"}),Object(_.jsx)(ot.b,{label:"As Rank",placeholder:"All",name:"splits_handicap",style:{width:"90px"},value:o,onChange:function(e){return l(e||"")},children:r.map((function(e){return Object(_.jsx)(ot.a,{value:e,children:e},e)}))}),Object(_.jsxs)(bt,{children:[Object(_.jsx)(ft,{id:"splits_expanded_label",htmlFor:"splits_expanded_toggle",children:"Detailed View"}),Object(_.jsx)(lt.a,{id:"splits_expanded_toggle","aria-labelledby":"splits_expanded_label",checked:d,onChange:function(e){return b(e)}})]}),Object(_.jsxs)(bt,{children:[Object(_.jsx)(ft,{id:"splits_forfeits_label",htmlFor:"splits_forfeits_toggle",children:"Exclude Forfeits"}),Object(_.jsx)(lt.a,{id:"splits_forfeits_toggle","aria-labelledby":"splits_forfeits_label",checked:h,onChange:function(e){return x(e)}})]})]}),Object(_.jsx)(Ue.c,{data:y,columns:[Object(_.jsx)(Ue.d,{label:"Split"}),Object(_.jsx)(Ue.d,{label:"Wins"}),Object(_.jsx)(Ue.d,{label:"Losses"}),Object(_.jsx)(Ue.d,{label:"Games For"}),Object(_.jsx)(Ue.d,{label:"Games Against"}),Object(_.jsx)(Ue.d,{label:"Win Margin"}),Object(_.jsx)(Ue.d,{label:"Loss Margin"}),Object(_.jsx)(Ue.d,{label:"Weeks"})],children:function(e){var t=e.datum;return console.log(t),Object(_.jsxs)(Ot,{noBorder:t.noBorder,children:[Object(_.jsx)(Ue.a,{children:t.name}),Object(_.jsx)(Ue.a,{children:t.wins}),Object(_.jsx)(Ue.a,{children:t.losses}),Object(_.jsx)(Ue.a,{children:t.gamesWon}),Object(_.jsx)(Ue.a,{children:t.gamesLost}),Object(_.jsx)(Ue.a,{children:t.wins?(t.diffWins/t.wins).toFixed(2):""}),Object(_.jsx)(Ue.a,{children:t.losses?(t.diffLosses/t.losses).toFixed(2):""}),Object(_.jsx)(Ue.a,{children:t.weeks.join(", ")})]},t.name)}})]})};function pt(e){return"up"===e?"Getting balls":"down"===e?"Giving balls":"Straight up"}function gt(e){if("0"===e)return"Straight up";var t="Getting ",n=e;return"-"===e.charAt(0)&&(t="Giving ",n=e.substring(1)),t+n}function vt(e){return"R1"===e?"Playing first":"R2"===e?"Playing second":"Fifth set"}var yt=x.a.div(mt||(mt=Object(h.a)(["\n  padding: 0 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),wt=Object(x.a)(Ye.a)(ht||(ht=Object(h.a)(["\n  margin-bottom: 1rem;\n  max-width: 360px;\n  @media (max-width: 720px) {\n    max-width: 100%;\n  }\n"])));var kt,_t=function(e){var t,n=e.playerMatchesByXref,a=e.playersByTeamXref,r=e.teamsByXref,c=null===(t=Object(f.f)().state)||void 0===t?void 0:t.xref,i=Object(s.useState)(),o=Object(m.a)(i,2),l=o[0],j=o[1];Object(s.useEffect)((function(){j(c)}),[c]);var u=Object(s.useState)([]),d=Object(m.a)(u,2),O=d[0],h=d[1],x=Object(s.useState)({xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0}),p=Object(m.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)({wins:0,losses:0,streak:0}),w=Object(m.a)(y,2),k=w[0],S=w[1],C=Object(s.useState)([]),T=Object(m.a)(C,2),B=T[0],L=T[1];return Object(s.useEffect)((function(){if(l){var e=n[l]||[];if(h(e),e.length){var t=Object(de.a)(e);t.sort((function(e,t){var n=e.date.getTime()-t.date.getTime();return 0===n?e.seq-t.seq:n}));var a=[];S(t.reduce((function(e,n,r){var c=n.players.find((function(e){return e.xref+""===l}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};return 0===r?(v(c.team),a.push(Ae(c.handicap))):a[0].value!==c.handicap&&(a[0].lastWeek=t[r-1].week_num,a.unshift(Ae(c.handicap))),c.win?(e.wins++,e.streak>0?e.streak++:e.streak=1):(e.losses++,e.streak<0?e.streak--:e.streak=-1),e}),{wins:0,losses:0,streak:0})),L(a)}}else h([])}),[l,n]),Object(_.jsxs)(yt,{children:[Object(_.jsx)(b.b,{to:"..",children:"Back to Standings"}),Object(_.jsx)(wt,{label:"Player Name",description:"Choose a player to view stats",placeholder:"Select a player...",value:l,onChange:j,children:Object.entries(a).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(_.jsx)(Ye.b,{label:r[n].name,children:a.map((function(e){return Object(_.jsx)(Ye.c,{value:e.xref+"",displayName:e.name},e.xref)}))},n)}))}),l&&Object(_.jsx)(Ze,{handicaps:B,record:k,team:g}),l&&Object(_.jsx)(it,{matches:O,xref:l}),l&&Object(_.jsx)(xt,{handicaps:B,matches:O,xref:l})]})},St=Object(x.a)(Ue.b,{shouldForwardProp:function(e){return"win"!==e&&"loss"!==e}})(kt||(kt=Object(h.a)(["\n  ","\n"])),(function(e){var t=e.theme,n=e.win,a=e.loss;return n?{backgroundColor:t.colors.lg.green.light2}:a?{backgroundColor:t.colors.lg.red.light2}:{}}));var Ct,Tt=function(e){var t=e.linkToPlayers,n=void 0===t?"players":t,a=e.playerMatches,r=e.selfTeamXref,c=Object(f.g)();return Object(_.jsx)(Ue.c,{data:a,columns:[Object(_.jsx)(Ue.d,{label:"Player"}),Object(_.jsx)(Ue.d,{label:"HCP"}),Object(_.jsx)(Ue.d,{label:"Games"}),Object(_.jsx)(Ue.d,{label:"Opponent"}),Object(_.jsx)(Ue.d,{label:"HCP"}),Object(_.jsx)(Ue.d,{label:"Games"})],children:function(e){var t=e.datum,a=t.players.find((function(e){return e.team.xref===r}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0},s=t.players.find((function(e){return e.team.xref!==r}))||{xref:0,name:"",team:{xref:0,name:""},handicap:0,games_won:0};return Object(_.jsxs)(St,{win:a.win,loss:a.loss,children:[Object(_.jsx)(Ue.a,{children:Object(_.jsx)(Te,{onClick:function(){return c(n,{state:{xref:a.xref+""}})},children:a.name})}),Object(_.jsx)(Ue.a,{children:a.handicap}),Object(_.jsx)(Ue.a,{children:a.games_won}),Object(_.jsx)(Ue.a,{children:Object(_.jsx)(Te,{onClick:function(){return c(n,{state:{xref:s.xref+""}})},children:s.name})}),Object(_.jsx)(Ue.a,{children:s.handicap}),Object(_.jsx)(Ue.a,{children:s.games_won})]},t._id)}})},Bt=x.a.div(Ct||(Ct=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  justify-content: center;\n  max-width: 100%;\n"])));var Lt,Wt=function(e){var t=e.linkToPlayers,n=e.playerMatchesByTeamXref,a=e.team,r=e.teamMatchesById,c=e.teamRecordsByXref,i=Object(s.useState)({}),o=Object(m.a)(i,2),l=o[0],j=o[1];return Object(s.useEffect)((function(){var e=(n[(null===a||void 0===a?void 0:a.xref)||0]||[]).reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t.match_id,[].concat(Object(de.a)(e[t.match_id]||[]),[t])))}),{});Object.entries(e).forEach((function(t){var n=Object(m.a)(t,2),a=n[0],r=n[1];r.sort((function(e,t){return e.seq-t.seq})),e[a]=r})),j(e)}),[null===a||void 0===a?void 0:a.xref,n]),a?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(v.e,{style:{marginTop:"1rem"},children:"Player Results"}),Object(_.jsx)(Ve,{linkToPlayers:t,playerMatches:n[a.xref]||[],selfTeamXref:a.xref}),Object(_.jsx)(v.e,{style:{marginTop:"1rem"},children:"Team Results"}),Object(_.jsx)(Bt,{children:a.schedule.map((function(e){var s=e.display,i=e.match_id,o=e.opp,j=function(e,t){var n=t.teams.find((function(t){return t.xref===e}))||{xref:0,name:"",games_won:0,matches_won:0},a=t.teams.find((function(t){return t.xref!==e}))||{xref:0,name:"",games_won:0,matches_won:0};return{self:n,opp:a}}(a.xref,r[i||""]||{teams:[]});return Object(_.jsxs)(Be.a,{title:"".concat(s,": vs. ").concat(o.name," (").concat(Pt(c[o.xref]),")"),description:i?Mt(j):"",children:[!i&&Object(_.jsx)(Ve,{linkToPlayers:t,playerMatches:n[o.xref]||[],selfTeamXref:o.xref}),i&&Object(_.jsx)(Tt,{linkToPlayers:t,playerMatches:l[i||""]||[],selfTeamXref:a.xref})]},s)}))})]}):null};function Mt(e){var t=e.self,n=e.opp;return"".concat(t.win?"\u2705 Win":"\ud83d\udca9 Loss",": ").concat(t.matches_won,"-").concat(n.matches_won,", ").concat(t.games_won,"-").concat(n.games_won)}function Pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{wins:0,losses:0};return"".concat(e.wins,"-").concat(e.losses)}var At=x.a.div(Lt||(Lt=Object(h.a)(["\n  padding: 0 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])));var Et,zt,Rt,Ft=function(e){var t=e.playerMatchesByTeamXref,n=e.teamsByXref,a=e.teamMatchesById,r=e.teamRecordsByXref,c=Object(f.h)().xref,i=Object(s.useState)(),o=Object(m.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(),d=Object(m.a)(u,2),b=d[0],O=d[1];return Object(s.useEffect)((function(){c&&(j(n[c]),O(r[c]))}),[n,r,c]),Object(_.jsxs)(At,{children:[Object(_.jsx)(Je,{team:l,teamRecord:b}),Object(_.jsx)(Wt,{linkToPlayers:"../players",playerMatchesByTeamXref:t,team:l,teamMatchesById:a,teamRecordsByXref:r})]})},It=x.a.div(Et||(Et=Object(h.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),Xt=x.a.div(zt||(zt=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 1rem;\n"]))),Dt=x.a.div(Rt||(Rt=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n"])));var qt=function(e){var t=e.playerMatchesByTeamXref,n=e.season,a=e.teamsByXref,r=e.teamMatchesById,c=e.teamRecordsByXref,i=Object(f.g)(),o=Object(s.useState)({}),l=Object(m.a)(o,2),j=l[0],u=l[1];Object(s.useEffect)((function(){u(Object.values(a).reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t.division_name,[].concat(Object(de.a)(e[t.division_name]||[]),[t.xref])))}),{}))}),[a]);var d=Object(s.useState)({}),b=Object(m.a)(d,2),h=b[0],x=b[1];Object(s.useEffect)((function(){x(Object.entries(j).reduce((function(e,t){var n=Object(m.a)(t,2),a=n[0],r=n[1].map((function(e){return c[e]||{xref:0,name:"",rank:0,wins:0,losses:0,pct:0}}));return r.sort((function(e,t){return e.wins===t.wins?e.losses===t.losses?t.pct-e.pct:e.losses-t.losses:t.wins-e.wins})),Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},a,r.map((function(e,t){return Object(be.a)(Object(be.a)({},e),{},{rank:t+1})}))))}),{}))}),[j,c]);var p=Object(s.useState)(0),g=Object(m.a)(p,2),y=g[0],w=g[1],k=Object(O.useMediaQuery)({query:"(max-width: 720px)"});return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(It,{children:n.nights.map((function(e){return Object(_.jsxs)(Xt,{children:[Object(_.jsx)(v.d,{style:{marginBottom:"1rem"},children:We(e)}),n.divisions[e].map((function(e){return Object(_.jsx)(Dt,{children:h[e]&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(v.e,{children:e}),Object(_.jsx)(Ue.c,{data:h[e],columns:[Object(_.jsx)(Ue.d,{label:"Place"}),Object(_.jsx)(Ue.d,{label:"Team Name"}),Object(_.jsx)(Ue.d,{label:"W's"}),Object(_.jsx)(Ue.d,{label:"L's"}),Object(_.jsx)(Ue.d,{label:"PCT."})],children:function(e){var t=e.datum;return Object(_.jsxs)(Ue.b,{children:[Object(_.jsx)(Ue.a,{children:t.rank}),Object(_.jsx)(Ue.a,{children:Object(_.jsx)(Te,{onClick:function(){return k?i(t.xref+""):w(t.xref)},children:t.name})}),Object(_.jsx)(Ue.a,{children:t.wins}),Object(_.jsx)(Ue.a,{children:t.losses}),Object(_.jsx)(Ue.a,{children:t.pct.toFixed(3)})]},t.xref)}})]})},e)}))]},e)}))}),Object(_.jsx)(Ge.a,{open:!!y,setOpen:function(e){e||w(0)},children:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Je,{modalView:!0,team:a[y],teamRecord:c[y]}),Object(_.jsx)(Wt,{playerMatchesByTeamXref:t,team:a[y],teamMatchesById:r,teamRecordsByXref:c})]})})]})};var Gt=function(e){var t=e.seasons,n=e.loadPlayerMatches,a=e.loadTeams,r=e.loadTeamMatches,c=e.saveDivisions,i=e.saveTeams,o=Object(f.h)(),l=o.year,j=o.term,u=o.type,d=Object(s.useMemo)((function(){return t.find((function(e){return e.year+""===l&&e.term===j&&e.type===u}))}),[t,l,j,u]),b=Object(s.useState)([]),O=Object(m.a)(b,2),h=O[0],x=O[1],p=Object(s.useState)({}),g=Object(m.a)(p,2),v=g[0],y=g[1];Object(s.useEffect)((function(){d&&a(d.xref).then((function(e){x(e),y(e.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t.xref,t))}),{}))}))}),[a,d]);var w=Object(s.useState)({}),k=Object(m.a)(w,2),S=k[0],C=k[1],T=Object(s.useState)({}),B=Object(m.a)(T,2),L=B[0],W=B[1];Object(s.useEffect)((function(){d&&r(d.xref).then((function(e){C(e.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t._id,t))}),{})),W(Object.entries(e.reduce((function(e,t){var n=0,a=t.teams.reduce((function(t,a){var r=e[a.xref]||function(){return{xref:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",wins:0,losses:0,gamesWon:0,gamesTotal:0}}(a.xref,a.name);return r.wins+=a.win?1:0,r.losses+=a.loss?1:0,r.gamesWon+=a.games_won,n+=a.games_won,Object(be.a)(Object(be.a)({},t),{},Object(fe.a)({},a.xref,r))}),{});return Object.values(a).forEach((function(e){e.gamesTotal+=n})),Object(be.a)(Object(be.a)({},e),a)}),{})).reduce((function(e,t){var n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},a,{xref:r.xref,name:r.name,rank:0,wins:r.wins,losses:r.losses,pct:r.gamesWon/r.gamesTotal}))}),{}))}))}),[r,d]);var M=Object(s.useState)([]),P=Object(m.a)(M,2),A=P[0],E=P[1],z=Object(s.useState)({}),R=Object(m.a)(z,2),F=R[0],I=R[1],X=Object(s.useState)({}),D=Object(m.a)(X,2),q=D[0],G=D[1],U=Object(s.useState)({}),N=Object(m.a)(U,2),H=N[0],J=N[1];return Object(s.useEffect)((function(){d&&n(d.xref).then((function(e){E(e);var t=e.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),t.players.reduce((function(n,a){return Object(be.a)(Object(be.a)({},n),{},Object(fe.a)({},a.xref,[].concat(Object(de.a)(e[a.xref]||[]),[t])))}),{}))}),{});Object.values(t).forEach((function(e){e.sort((function(e,t){var n=t.date.getTime()-e.date.getTime();return n||t.seq-e.seq}))})),I(t),G(e.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),t.players.reduce((function(n,a){return Object(be.a)(Object(be.a)({},n),{},Object(fe.a)({},a.team.xref,[].concat(Object(de.a)(e[a.team.xref]||[]),[t])))}),{}))}),{})),J(Object.entries(e.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),t.players.reduce((function(t,n){return Object(be.a)(Object(be.a)({},t),{},Object(fe.a)({},n.team.xref,Object(be.a)(Object(be.a)({},e[n.team.xref]||{}),{},Object(fe.a)({},n.xref,n))))}),{}))}),{})).reduce((function(e,t){var n=Object(m.a)(t,2),a=n[0],r=n[1],c=Object.values(r);return c.sort((function(e,t){return e.xref-t.xref})),Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},a,c))}),{}))}))}),[n,d]),d?Object(_.jsxs)(f.d,{children:[Object(_.jsx)(f.b,{path:"/",element:Object(_.jsx)(qt,{season:d,playerMatches:A,playerMatchesByTeamXref:q,teamsByXref:v,teamMatchesById:S,teamRecordsByXref:L})}),Object(_.jsx)(f.b,{path:"admin",element:Object(_.jsx)(qe,{season:d,teams:h,saveDivisions:function(e){return c(d.xref,e)},saveTeams:function(e){return i(d.xref,e)}})}),Object(_.jsx)(f.b,{path:"players",element:Object(_.jsx)(_t,{playerMatchesByXref:F,playersByTeamXref:H,teamsByXref:v,teamMatchesById:S})}),Object(_.jsx)(f.b,{path:":xref",element:Object(_.jsx)(Ft,{playerMatchesByTeamXref:q,teamsByXref:v,teamMatchesById:S,teamRecordsByXref:L})})]}):Object(_.jsx)(ge,{})},Ut=n(44);var Nt,Ht,Jt,Kt=function(e){var t=e.saveSeason,n=Object(s.useState)(""),a=Object(m.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)(""),o=Object(m.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(""),d=Object(m.a)(u,2),b=d[0],f=d[1],O=Object(s.useState)(""),h=Object(m.a)(O,2),x=h[0],p=h[1],k=Object(s.useState)(""),S=Object(m.a)(k,2),C=S[0],T=S[1],B=Object(s.useState)(!1),L=Object(m.a)(B,2),W=L[0],M=L[1],P=Object(s.useState)(!1),A=Object(m.a)(P,2),E=A[0],z=A[1],R=Object(s.useState)(!1),F=Object(m.a)(R,2),I=F[0],X=F[1],D=Object(s.useState)(!1),q=Object(m.a)(D,2),G=q[0],U=q[1],N=Object(s.useState)(!1),H=Object(m.a)(N,2),J=H[0],K=H[1],V=Object(s.useState)(!1),Y=Object(m.a)(V,2),Q=Y[0],$=Y[1],Z=Object(s.useState)(!1),ee=Object(m.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(s.useState)(""),re=Object(m.a)(ae,2),ce=re[0],se=re[1],ie=Object(s.useState)(""),oe=Object(m.a)(ie,2),le=oe[0],je=oe[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ot.b,{label:"Year",placeholder:"Choose a year...",value:r,onChange:c,children:Object(_.jsx)(ot.a,{value:"2022",children:"2022"})}),Object(_.jsxs)(ot.b,{label:"Term",placeholder:"Choose a term...",value:l,onChange:j,children:[Object(_.jsx)(ot.a,{value:"winter",children:"Winter"}),Object(_.jsx)(ot.a,{value:"spring",children:"Spring"}),Object(_.jsx)(ot.a,{value:"summer",children:"Summer"}),Object(_.jsx)(ot.a,{value:"fall",children:"Fall"})]}),Object(_.jsx)(ot.b,{label:"League type",placeholder:"Choose a league...",value:b,onChange:f,children:Object(_.jsx)(ot.a,{value:"team_8ball",children:"Team 8 Ball"})}),Object(_.jsx)(g.a,{label:"Amsterdam Key",description:"Enter the Amsterdam site season id",onChange:function(e){return p(e.target.value)},value:x}),Object(_.jsx)(g.a,{label:"Name",description:"Enter the season name",onChange:function(e){return T(e.target.value)},value:C}),Object(_.jsxs)("div",{children:[Object(_.jsx)(v.a,{children:"Select the nights the league plays on"}),Object(_.jsxs)("div",{children:[Object(_.jsx)(Ut.a,{label:"Monday",checked:W,onChange:function(e){return M(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Tuesday",checked:E,onChange:function(e){return z(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Wednesday",checked:I,onChange:function(e){return X(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Thursday",checked:G,onChange:function(e){return U(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Friday",checked:J,onChange:function(e){return K(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Saturday",checked:Q,onChange:function(e){return $(e.target.checked)}}),Object(_.jsx)(Ut.a,{label:"Sunday",checked:te,onChange:function(e){return ne(e.target.checked)}})]})]}),Object(_.jsx)(g.a,{label:"Season length",description:"Enter the number of weeks of the regular season",onChange:function(e){return se(e.target.value)},value:ce}),Object(_.jsx)(Le.a,{primaryButton:{text:"Save",onClick:function(){var e=Object(w.a)(Object(y.a)().mark((function e(n){var a,c,s,i,o,j,u;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a=0,e.prev=2,a=parseInt(r,10),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),je("invalid year value: ".concat(e.t0)),e.abrupt("return");case 10:if(c="winter",!Ee(l)){e.next=15;break}c=l,e.next=17;break;case 15:return je("invalid season term: ".concat(l)),e.abrupt("return");case 17:if(s="team_8ball","team_8ball"!==b){e.next=22;break}c=l,e.next=24;break;case 22:return je("invalid league type: ".concat(l)),e.abrupt("return");case 24:i=0,e.prev=25,i=parseInt(x,10),e.next=33;break;case 29:return e.prev=29,e.t1=e.catch(25),je("invalid amsterdam key: ".concat(e.t1)),e.abrupt("return");case 33:o=0,e.prev=34,o=parseInt(ce,10),e.next=42;break;case 38:return e.prev=38,e.t2=e.catch(34),je("invalid amsterdam key: ".concat(e.t2)),e.abrupt("return");case 42:return j=[],W&&j.push("monday"),E&&j.push("tuesday"),I&&j.push("wednesday"),G&&j.push("thursday"),J&&j.push("friday"),Q&&j.push("saturday"),te&&j.push("sunday"),e.prev=50,e.next=53,t({year:a,term:c,type:s,xref:i,name:C,num_weeks:o,nights:j,divisions:j.reduce((function(e,t){return Object(be.a)(Object(be.a)({},e),{},Object(fe.a)({},t,[]))}),{})});case 53:e.next=59;break;case 55:e.prev=55,e.t3=e.catch(50),u=e.t3.error,je("failed to save season: ".concat(u));case 59:case"end":return e.stop()}}),e,null,[[2,6],[25,29],[34,38],[50,55]])})));return function(t){return e.apply(this,arguments)}}()},errorMessage:le})]})},Vt=x.a.div(Nt||(Nt=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Yt=x.a.div(Ht||(Ht=Object(h.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),Qt=x.a.div(Jt||(Jt=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n"])));var $t=function(e){var t=e.seasons,n=e.saveSeason,a=Object(f.g)(),r=W().data,c=Object(s.useState)(!1),i=Object(m.a)(c,2),o=i[0],l=i[1];return r?Object(_.jsxs)(Vt,{children:[Object(_.jsx)(v.d,{style:{marginBottom:"1rem"},children:"Pick a season:"}),Object(_.jsxs)(Yt,{children:[t.map((function(e){return Object(_.jsx)(se.a,{style:{minWidth:"360px"},onClick:function(){return a("".concat(e.year,"/").concat(e.term,"/").concat(e.type))},children:Object(_.jsxs)(Qt,{children:[Object(_.jsx)(v.h,{children:e.name}),Object(_.jsx)(ee.a,{align:"bottom",justify:"start",trigger:Object(_.jsx)(p.c,{type:"button",size:"xsmall",onClick:function(e){return e.stopPropagation()},name:"options",children:Object(_.jsx)($.a,{glyph:"Ellipsis"})}),children:Object(_.jsx)(ee.b,{onClick:function(){return console.log("psyche! like i'd let you do this...")},children:"Delete season"})})]})},e.xref)})),Object(_.jsx)(se.a,{style:{minWidth:"180px"},onClick:function(){return l(!0)},children:"Create a new season..."})]}),Object(_.jsx)(Ge.a,{open:o,setOpen:l,children:Object(_.jsx)(Kt,{saveSeason:function(e){return n(e).then((function(){return l(!1)}))}})})]}):null};var Zt=function(){var e=W().data,t=Object(s.useState)([]),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(s.useEffect)((function(){e&&e.seasons().find().then(r)}),[e]),e?Object(_.jsxs)(f.d,{children:[Object(_.jsx)(f.b,{path:"/",element:Object(_.jsx)($t,{seasons:a,saveSeason:function(t){return e.seasons().insertOne(t).then((function(e){var n=e.insertedId;return r([].concat(Object(de.a)(a),[Object(be.a)(Object(be.a)({},t),{},{_id:n})]))}))}})}),Object(_.jsx)(f.b,{path:":year/:term/:type/*",element:Object(_.jsx)(Gt,{seasons:a,loadPlayerMatches:function(t){return e.playerMatches().find({season_xref:t})},loadTeams:function(t){return e.teams().find({season_xref:t})},loadTeamMatches:function(t){return e.teamMatches().find({season_xref:t})},saveDivisions:function(t,n){return e.seasons().updateOne({xref:t},{$set:{divisions:n}}).then((function(e){if(1!==e.modifiedCount)throw new Error("failed to update season "+t);r(a.map((function(e){return e.xref!==t?e:Object(be.a)(Object(be.a)({},e),{},{divisions:n})})))}))},saveTeams:function(t,n){return e.teams().insertMany(n.map((function(e){return Object(be.a)(Object(be.a)({},e),{},{season_xref:t,schedule:[]})}))).then((function(){}))}})})]}):null};var en,tn,nn=function(){var e=Object(O.useMediaQuery)({query:"(max-width: 720px)"});return Object(_.jsxs)(_.Fragment,{children:[e?Object(_.jsx)(ce,{}):Object(_.jsx)(Q,{}),Object(_.jsxs)(f.d,{children:[Object(_.jsx)(f.b,{path:"/",element:Object(_.jsx)(I,{children:Object(_.jsx)(ue,{})})}),Object(_.jsx)(f.b,{path:"seasons/*",element:Object(_.jsx)(I,{children:Object(_.jsx)(Zt,{})})}),Object(_.jsx)(f.b,{path:"login",element:Object(_.jsx)(z,{})})]})]})},an=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},rn="".concat("https://d2va9gm4j17fy9.cloudfront.net","/fonts"),cn=Object(l.css)(en||(en=Object(h.a)(["\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: normal;\n    src: url('","/akzidgrostdreg.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdreg.eot?#iefix')\n        format('embedded-opentype'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdreg.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdreg.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: 600;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  @font-face {\n    font-family: 'Akzidenz';\n    font-weight: bold;\n    src: url('","/akzidgrostdmed.eot');\n    /* IE9 Compat Modes */\n    src: url('","/akzidgrostdmed.eot?#iefix')\n        format('embedded-opentype'),\n      /* IE6-IE8 */ url('","/akzidgrostdmed.woff') format('woff'),\n      /* Pretty Modern Browsers */ url('","/akzidgrostdmed.ttf')\n        format('truetype'),\n      /* Safari, Android, iOS */ url('","/akzidgrostdmed.svg#Akzidenz')\n        format('svg');\n    /* Legacy iOS */\n  }\n\n  html {\n    font-family: 'Akzidenz', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-weight: normal;\n    font-style: normal;\n  }\n\n  body {\n    margin: 0;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: border-box;\n  }\n"])),rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,rn),sn=Object(l.css)(tn||(tn=Object(h.a)(["\n/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n"])));var on=function(){return[sn,cn]},ln={colors:{black:"#000000",white:"#ffffff",offwhite:"#fffed1",grays:{base:"#282c34"},reds:{base:"#4d0a05",light1:"#8a1a10",light2:"#b42619",light3:"#df3121"},blues:{light1:"#61dafb"},lg:n(2).a},typography:{fonts:{code:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"}}};d.a.createRoot(document.getElementById("root")).render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(b.a,{basename:"/amsterdam",children:Object(_.jsx)(C,{children:Object(_.jsx)(L,{children:Object(_.jsx)(j.c,{children:Object(_.jsxs)(o.f,{theme:ln,children:[Object(_.jsx)(l.Global,{styles:on}),Object(_.jsx)(nn,{})]})})})})})})),an()}},[[309,1,2]]]);
//# sourceMappingURL=main.df81f6e2.chunk.js.map